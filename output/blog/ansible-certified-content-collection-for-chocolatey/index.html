<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Using Red Hat Ansible Automation Platform and Chocolatey, you can easily keep your software up-to-date and react quickly to bug fixes, security issues and 0-days on dozens, hundreds or thousands of nodes">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ansible Certified Content Collection for Chocolatey | Ansible Collaborative</title>
<link href="../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/theme.css" rel="stylesheet" type="text/css">
<!-- Red Hat fonts --><link rel="stylesheet" href="https://static.redhat.com/libs/redhat/redhat-font/2.0.0/webfonts/red-hat-font.css">
<!-- Font Awesome --><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
<!-- Fork Awesome --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css" integrity="sha256-XoaMnoYC5TH6/+ihMEnospgm0J1PM/nioxbOUdnM8HY=" crossorigin="anonymous">
<!-- Sass compiled css  --><link rel="stylesheet" href="../../assets/css/main.css">
<link rel="stylesheet" href="../../assets/css/redhat-footer.css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://ansible.com/blog/ansible-certified-content-collection-for-chocolatey/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Paul Broadwith">
<link rel="prev" href="../developing-and-testing-ansible-roles-with-molecule-and-podman-part-1/" title="Developing and Testing Ansible Roles with Molecule and Podman - Part 1" type="text/html">
<link rel="next" href="../getting-started-with-ospfv2-resource-modules/" title="Getting Started With OSPFV2 Resource Modules" type="text/html">
<meta property="og:site_name" content="Ansible Collaborative">
<meta property="og:title" content="Ansible Certified Content Collection for Chocolatey">
<meta property="og:url" content="https://ansible.com/blog/ansible-certified-content-collection-for-chocolatey/">
<meta property="og:description" content="Using Red Hat Ansible Automation Platform and Chocolatey, you can easily keep your software up-to-date and react quickly to bug fixes, security issues and 0-days on dozens, hundreds or thousands of no">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-08-26T00:00:00Z">
</head>
<body id="top">

<div class="global-container" id="content" role="main">
<!-- Start menubar -->
<nav class="navbar navbar-expand-lg static-top mb-4 navbar-padding full-width-bg   navbar-dark   bg-pool   "><div class="masthead">
    <!-- This keeps the margins nice -->
    <a class="navbar-brand" href="../../">
        <img src="../../images/ansible_logo-small-15.png" alt="Ansible community logo" id="logo" class="d-inline-block align-top" width="50" height="50"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon nav-toggle-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="bs-navbar">
      <ul class="navbar-nav mr-auto"></ul>
<ul class="navbar-nav navbar-right">
<li class="nav-item dropdown">
	        <a href="#" class="nav-link nav-link-color dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    <i class=""></i> Documentation
                </a>
		<div class="dropdown-menu dropdown-menu-border">
	    
                    <a href="https://docs.ansible.com/" class="dropdown-item">
		        <i class=""></i> Project documentation
                    </a>
                    <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/" class="dropdown-item">
		        <i class=""></i> Ansible Automation Platform documentation
                    </a>
            </div>
                 </li>
<li class="nav-item">
		     <a href="https://galaxy.ansible.com/" target="_blank" class="nav-link nav-link-color">
		         <i class=""></i> Galaxy
		     </a>
		 </li>
                 <li class="nav-item">
		     <a href="https://forum.ansible.com/" target="_blank" class="nav-link nav-link-color">
		         <i class=""></i> Forum
		     </a>
		 </li>
            <li class="nav-item dropdown">
	        <a href="#" class="nav-link nav-link-color dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    <i class=""></i> Resources
                </a>
		<div class="dropdown-menu dropdown-menu-border">
	    
                    <a href="../../how-ansible-works/" class="dropdown-item">
		        <i class=""></i> How Ansible works
                    </a>
                    <a href="../../ecosystem/" class="dropdown-item">
		        <i class=""></i> Ansible ecosystem
                    </a>
                    <a href="../archive.html" class="dropdown-item">
		        <i class=""></i> Blog
                    </a>
                    <a href="../../faq/" class="dropdown-item">
		        <i class=""></i> Frequently asked questions
                    </a>
                    <a href="../../ansible-community-training/" class="dropdown-item">
		        <i class=""></i> Ansible community training
                    </a>
                    <a href="../../contact-us/" class="dropdown-item">
		        <i class=""></i> Contact us
                    </a>
            </div>
                 </li>
<li class="nav-item">
		     <a href="https://www.redhat.com/en/technologies/management/ansible?sc_cid=7015Y000003szaKQAQ" target="_blank" class="nav-link nav-link-color">
		         <i class=""></i> Ansible Automation Platform
		     </a>
		 </li>

        
      </ul>
</div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav><!-- End default Menubar --><div class="body-content center-band">
        <!--Body content-->
        
  <article class="post-text h-entry hentry postpage ansible-content" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Ansible Certified Content Collection for Chocolatey</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/paul-broadwith/">Paul Broadwith</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2020-08-26T00:00:00Z" itemprop="datePublished" title="2020-08-26 00:00">2020-08-26 00:00</time></a>
            </p>
                    <p class="sourceline"><a href="index.md" class="sourcelink">Source</a></p>

        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
<h2>Ansible Certified Content Collection for Chocolatey</h2>
<p>It's a constant battle to keep your Windows estate updated and secure.
Using Red Hat Ansible Automation Platform and Chocolatey, you can easily
keep your software up-to-date and react quickly to bug fixes, security
issues and 0-days on dozens, hundreds or thousands of nodes.</p>
<p>We're going to take you through three simple steps to show you how
simple it is to deploy and update software using Chocolatey and Ansible.</p>
<h3>Before We Start: Windows Prerequisites</h3>
<p>Ansible  uses Winrm by default to communicate with Windows machines.
Therefore, we need to ensure we have that enabled by running
<code>Enable-PSRemoting</code> on the remote Windows computer.</p>
<p>For production use, we recommend enabling
<a href="https://support.microsoft.com/en-gb/help/2019527/how-to-configure-winrm-for-https">HTTPS for WinRM</a>. </p>
<p>The code examples shown below are all using the user 'ansible' as the
default. If you are using a different username, make sure you change it!</p>
<p><strong>Step 1: Configure Ansible to use Chocolatey.</strong></p>
<p>We need to install the Chocolatey module so that Ansible can use. The 
Chocolatey Ansible Content Collection is called
<a href="https://galaxy.ansible.com/chocolatey/chocolatey">chocolatey:chocolatey</a>
and is maintained by the
<a href="https://github.com/chocolatey/chocolatey-ansible">Chocolatey</a>
Team. To install the Collection, and therefore the win_chocolatey
modules, on your Ansible server, run:</p>
<div class="code"><pre class="code literal-block">ansible-galaxy collection install chocolatey.chocolatey
</pre></div>

<p>That's all there is to it! Ansible can now work with Chocolatey using
the modules in the Collection.</p>
<p><strong>Step 2: Install software on a remote computer</strong></p>
<p>Now that we have the win_chocolatey module installed, we can go ahead
and install or manage software on our remote computers.</p>
<p>Let's create a file called <code>install_notepadplusplus.yml</code> with the
following contents:</p>
<div class="code"><pre class="code literal-block"><span class="o">---</span>
<span class="o">-</span><span class="w"> </span><span class="n">hosts</span><span class="p">:</span><span class="w"> </span><span class="n">all</span>
<span class="w">  </span><span class="n">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>

<span class="w">  </span><span class="n">vars_prompt</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">password</span>
<span class="w">      </span><span class="n">prompt</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter the password for the node"</span>

<span class="w">  </span><span class="n">vars</span><span class="p">:</span>
<span class="w">      </span><span class="n">ansible_user</span><span class="p">:</span><span class="w"> </span><span class="n">ansible</span>
<span class="w">      </span><span class="n">ansible_password</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{ password }}"</span>
<span class="w">      </span><span class="n">ansible_connection</span><span class="p">:</span><span class="w"> </span><span class="n">winrm</span>
<span class="w">      </span><span class="n">ansible_winrm_transport</span><span class="p">:</span><span class="w"> </span><span class="n">ntlm</span>
<span class="w">      </span><span class="n">ansible_winrm_server_cert_validation</span><span class="p">:</span><span class="w"> </span><span class="n">ignore</span>

<span class="w">  </span><span class="n">tasks</span><span class="p">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">Install</span><span class="w"> </span><span class="n">Notepad</span><span class="o">++</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mf">7.8</span>
<span class="w">        </span><span class="n">win_chocolatey</span><span class="p">:</span>
<span class="w">          </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">notepadplusplus</span>
<span class="w">          </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="err">‘</span><span class="mf">7.8</span><span class="err">’</span>
</pre></div>

<p>Run <code>ansible-playbook install_notepadplusplus.yaml -i &lt;ip address&gt;,</code>
(note the comma after the IP address) to install Notepad++ on your
remote computer. Note that we are not installing the latest version in
this example as we will update to that in the next step.</p>
<p>Once installed, open Notepad++ and press <code>F1</code> to ensure we have
installed the requested version. </p>
<p><strong>Step 3: Update software on a remote computer</strong></p>
<p>To ensure you always have the latest version of software installed on
your computers, you can use Chocolatey to upgrade them. We'll upgrade to
the latest version of Notepad++.</p>
<p>Create a file called <code>upgrade_notepadplusplus.yml</code> with the following
contents:</p>
<div class="code"><pre class="code literal-block"><span class="o">---</span>
<span class="o">-</span><span class="w"> </span><span class="n">hosts</span><span class="p">:</span><span class="w"> </span><span class="n">all</span>
<span class="w">  </span><span class="n">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>

<span class="w">  </span><span class="n">vars_prompt</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">password</span>
<span class="w">      </span><span class="n">prompt</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter the password for the node"</span>

<span class="w">  </span><span class="n">vars</span><span class="p">:</span>
<span class="w">    </span><span class="n">ansible_user</span><span class="p">:</span><span class="w"> </span><span class="n">ansible</span>
<span class="w">    </span><span class="n">ansible_password</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{ password }}"</span>
<span class="w">    </span><span class="n">ansible_connection</span><span class="p">:</span><span class="w"> </span><span class="n">winrm</span>
<span class="w">    </span><span class="n">ansible_winrm_transport</span><span class="p">:</span><span class="w"> </span><span class="n">ntlm</span>
<span class="w">    </span><span class="n">ansible_winrm_server_cert_validation</span><span class="p">:</span><span class="w"> </span><span class="n">ignore</span>

<span class="w">  </span><span class="n">tasks</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">Install</span><span class="w"> </span><span class="n">latest</span><span class="w"> </span><span class="n">Notepad</span><span class="o">++</span>
<span class="w">      </span><span class="n">win_chocolatey</span><span class="p">:</span>
<span class="w">        </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">notepadplusplus</span>
<span class="w">        </span><span class="n">state</span><span class="p">:</span><span class="w"> </span><span class="n">latest</span>
</pre></div>

<p>Run <code>ansible-playbook upgrade_notepadplusplus.yaml -i &lt;ip address&gt;,</code>
(note the comma after the IP address) to update, or install, the latest
Notepad++ on your remote computer. Once installed, open Notepad++ and
press <code>F1</code> to ensure we have installed the latest version. </p>
<h3>Next Steps</h3>
<p>While we have only worked with one remote computer in this blog post,
Ansible allows you to replicate this across dozens, hundreds and
thousands of remote computers.</p>
<p>Now that you have the Ansible Chocolatey modules installed, you can
install, uninstall, update and manage packages on your computers. Other
modules in the Chocolatey Ansible  Content Collection give you the
ability to manage the configuration, features and sources for Chocolatey
itself. You can find more information on the
<a href="https://galaxy.ansible.com/chocolatey/chocolatey">Ansible Galaxy Chocolatey collection page</a>.</p>
<p>Chocolatey has a <a href="https://chocolatey.org/docs/how-to-setup-internal-package-repository">recommended architecture</a>
for organizations, which includes setting up an internal repository. To
speed up that process, there is a <a href="https://chocolatey.org/docs/quick-deployment-environment">Quick Deployment Environment</a> that
allows you to be up and running with an internal repository with useful
packages already loaded, Jenkins for automation and Chocolatey Central
Management for reporting in around two hours.</p>
<p>For package management on Windows, Chocolatey is the package manager of
choice. Working in harmony with Ansible, you can use it to update and
manage your Windows computers in a similar way as you would with Linux.</p>
</div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../developing-and-testing-ansible-roles-with-molecule-and-podman-part-1/" rel="prev" title="Developing and Testing Ansible Roles with Molecule and Podman - Part 1">Previous post</a>
            </li>
            <li class="next">
                <a href="../getting-started-with-ospfv2-resource-modules/" rel="next" title="Getting Started With OSPFV2 Resource Modules">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content-->
</div>
        <div class="content-slim redhat-footer">
      <div class="footer-left">
        <ul class="footer-left-links">
<li>
            <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a>
          </li>
          <li>
            <a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy policy</a>
          </li>
          <li>
            <a href="https://docs.ansible.com/ansible/latest/community/code_of_conduct.html" target="_blank">Code of conduct</a>
          </li>
        </ul>
</div>
      <div class="footer-right">
        <span class="redhat">Powered by</span>
        <span class="redhat-logo">
          <a href="https://www.redhat.com/en/technologies/management/ansible" target="_blank">
            <img src="../../assets/images/redhat_reversed.svg" alt="Red Hat logo." width="96" height="28"></a>
        </span>
      </div>
    </div>

</div>

            <script src="../../assets/js/jquery.min.js"></script><script src="../../assets/js/popper.min.js"></script><script src="../../assets/js/bootstrap.min.js"></script><script src="../../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
</script><script src="../../assets/js/clipboard.min.js" type="text/javascript"></script><script src="../../assets/js/clipboard.js" type="text/javascript"></script>
</body>
</html>
