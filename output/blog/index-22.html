<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Ansible Collaborative Website">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ansible Collaborative (old posts, page 22) | Ansible Collaborative</title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<!-- Red Hat fonts --><link rel="stylesheet" href="https://static.redhat.com/libs/redhat/redhat-font/2.0.0/webfonts/red-hat-font.css">
<!-- Font Awesome --><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
<!-- Fork Awesome --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css" integrity="sha256-XoaMnoYC5TH6/+ihMEnospgm0J1PM/nioxbOUdnM8HY=" crossorigin="anonymous">
<!-- Sass compiled css  --><link rel="stylesheet" href="../assets/css/main.css">
<link rel="stylesheet" href="../assets/css/redhat-footer.css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../rss.xml">
<link rel="canonical" href="https://ansible.com/blog/index-22.html">
<link rel="prev" href="." type="text/html">
<link rel="next" href="index-21.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body id="top">

<div class="global-container" id="content" role="main">
<!-- Start menubar -->
<nav class="navbar navbar-expand-lg static-top mb-4 navbar-padding full-width-bg   navbar-dark   bg-pool   "><div class="masthead">
    <!-- This keeps the margins nice -->
    <a class="navbar-brand" href="../">
        <img src="../images/ansible_logo-small-15.png" alt="Ansible community logo" id="logo" class="d-inline-block align-top" width="50" height="50"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon nav-toggle-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="bs-navbar">
      <ul class="navbar-nav mr-auto"></ul>
<ul class="navbar-nav navbar-right">
<li class="nav-item dropdown">
	        <a href="#" class="nav-link nav-link-color dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    <i class=""></i> Documentation
                </a>
		<div class="dropdown-menu dropdown-menu-border">
	    
                    <a href="https://docs.ansible.com/" class="dropdown-item">
		        <i class=""></i> Project documentation
                    </a>
                    <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/" class="dropdown-item">
		        <i class=""></i> Ansible Automation Platform documentation
                    </a>
            </div>
                 </li>
<li class="nav-item">
		     <a href="https://galaxy.ansible.com/" target="_blank" class="nav-link nav-link-color">
		         <i class=""></i> Galaxy
		     </a>
		 </li>
                 <li class="nav-item">
		     <a href="https://forum.ansible.com/" target="_blank" class="nav-link nav-link-color">
		         <i class=""></i> Forum
		     </a>
		 </li>
            <li class="nav-item dropdown">
	        <a href="#" class="nav-link nav-link-color dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    <i class=""></i> Resources
                </a>
		<div class="dropdown-menu dropdown-menu-border">
	    
                    <a href="../how-ansible-works/" class="dropdown-item">
		        <i class=""></i> How Ansible works
                    </a>
                    <a href="../ecosystem/" class="dropdown-item">
		        <i class=""></i> Ansible ecosystem
                    </a>
                    <a href="archive.html" class="dropdown-item">
		        <i class=""></i> Blog
                    </a>
                    <a href="../faq/" class="dropdown-item">
		        <i class=""></i> Frequently asked questions
                    </a>
                    <a href="../ansible-community-training/" class="dropdown-item">
		        <i class=""></i> Ansible community training
                    </a>
                    <a href="../contact-us/" class="dropdown-item">
		        <i class=""></i> Contact us
                    </a>
            </div>
                 </li>
<li class="nav-item">
		     <a href="https://www.redhat.com/en/technologies/management/ansible?sc_cid=7015Y000003szaKQAQ" target="_blank" class="nav-link nav-link-color">
		         <i class=""></i> Ansible Automation Platform
		     </a>
		 </li>

        
      </ul>
</div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav><!-- End default Menubar --><div class="body-content center-band">
        <!--Body content-->
        
    
  <div class="postindex ansible-content">
      <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="learn-about-event-driven-ansible-at-red-hat-summit-and-ansiblefest-2023/" class="u-url">Learn about Event-Driven Ansible at Red Hat Summit and AnsibleFest 2023</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/elle-universal/">Elle Universal</a>
              </span>
            </p>
            <p class="dateline">
              <a href="learn-about-event-driven-ansible-at-red-hat-summit-and-ansiblefest-2023/" rel="bookmark">
                <time class="published dt-published" datetime="2023-05-10T00:00:00Z" itemprop="datePublished" title="2023-05-10 00:00">2023-05-10 00:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <h2>Learn about Event-Driven Ansible at Red Hat Summit and AnsibleFest 2023</h2>
<p>As you may have heard,
<a href="https://events.experiences.redhat.com/widget/redhat/sum23/SessionCatalog2023?tab.day=20230524&amp;search.track=16439120758070013sVo">AnsibleFest</a>
will be taking place at Red Hat Summit in Boston May 23-25. This change
will allow you to harness everything that Red Hat technology has to
offer in a single place and give you even more tools to address your
automation needs. Join Ansible and automation-focused audiences to hear
from Red Hat and Ansible leaders, customers, and partners while getting
the latest on future Ansible product updates, community projects, and
what's coming in IT automation. </p>
<p>Event-Driven Ansible is a key component to address the complexities of
managing varying assets at scale. We announced this product feature as a
developer preview last October at AnsibleFest 2022, and we are excited
to talk even more about it.  So what can you expect to see about
Event-Driven Ansible at AnsibleFest and Red Hat Summit this year? </p>
<ul>
<li>Red Hat Summit keynote with a customer story around their use of
    Event-Driven automation</li>
<li>AnsibleFest keynote about why the next wave of automation will be
    event-driven </li>
<li>Breakout sessions from Ansible experts and customers</li>
<li>Hands on labs</li>
<li>Discovery Theater mini sessions in the expo hall</li>
</ul>
<p>Do you have questions about Event-Driven Ansible? Bring them to
AnsibleFest and take advantage of the experts at the Ansible booth as
well as the Ask the Expert area. We will also be running three different
labs focused on Event-Driven Ansible, so this is the perfect opportunity
to get hands-on experience while being able to ask questions in real
time to Ansible experts. These labs include: </p>
<ul>
<li>Event-Driven Ansible and Red Hat OpenShift</li>
<li>Event-Driven Ansible and Red Hat OpenShift GitOps</li>
<li>Event-Driven Ansible and NetOps</li>
</ul>
<p>Please refer to the
<a href="https://events.experiences.redhat.com/widget/redhat/sum23/SessionCatalog2023?tab.day=20230524&amp;search.track=16439120758070013sVo">session catalog</a>
for the most up to date room assignments; sessions subject to change.</p>
<p>Still hungry for more Event-Driven Ansible content? We have you
covered. Check out these resources to learn more about how Event-Driven
Ansible can help you:</p>
<ul>
<li>
<a href="https://reg.experiences.redhat.com/flow/redhat/sum23/regGenAttendee/login?extIdCarryOver=true&amp;sc_cid=701f2000001OH6uAAG">Register</a> for AnsibleFest at Red Hat Summit</li>
<li>See what the analysts are saying about Event-Driven Ansible in this <a href="https://www.redhat.com/en/resources/event-driven-impact-on-it-operations-analyst-material?extIdCarryOver=true&amp;sc_cid=701f2000001OH6uAAG">research paper</a>
</li>
</ul>
</div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="bullhorn-97/" class="u-url">Bullhorn #97</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/ansible-collaborative-et-al/">Ansible Collaborative, et al</a>
              </span>
            </p>
            <p class="dateline">
              <a href="bullhorn-97/" rel="bookmark">
                <time class="published dt-published" datetime="2023-04-06T06:00:00Z" itemprop="datePublished" title="2023-04-06 06:00">2023-04-06 06:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <div>
<p><img alt="Ansible Bullhorn banner" src="../images/bullhorn-banner-mango.png"></p>
<p><em>A Newsletter for the Ansible Developer Community</em>
<em>Issue #97, 2023-04-04 (<a href="https://us19.campaign-archive.com/home/?u=56d874e027110e35dea0e03c1&amp;id=d6635f5420">Past Issues</a>)</em></p>
<p>Welcome to <a href="https://github.com/ansible/community/wiki/News#the-bullhorn">The Bullhorn</a>, our newsletter for the Ansible developer community. If you have any questions or content you’d like to share, you're welcome to chat with us in the <a href="https://matrix.to/#/#social:ansible.com">Ansible Social room on Matrix</a>, and mention <a href="https://matrix.to/#/@newsbot:ansible.im"><code>newsbot</code></a> to have your news item tagged for review for the next weekly issue!</p>
</div>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="bullhorn-96/" class="u-url">Bullhorn #96</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/ansible-collaborative-et-al/">Ansible Collaborative, et al</a>
              </span>
            </p>
            <p class="dateline">
              <a href="bullhorn-96/" rel="bookmark">
                <time class="published dt-published" datetime="2023-03-26T08:00:00Z" itemprop="datePublished" title="2023-03-26 08:00">2023-03-26 08:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <div>
<p><img alt="Ansible Bullhorn banner" src="../images/bullhorn-banner-mango.png"></p>
<p><em>A Newsletter for the Ansible Developer Community</em>
<em>Issue #96, 2023-03-26 (<a href="https://us19.campaign-archive.com/home/?u=56d874e027110e35dea0e03c1&amp;id=d6635f5420">Past Issues</a>)</em></p>
<p>Welcome to <a href="https://github.com/ansible/community/wiki/News#the-bullhorn">The Bullhorn</a>, our newsletter for the Ansible developer community. If you have any questions or content you’d like to share, you're welcome to chat with us in the <a href="https://matrix.to/#/#social:ansible.com">Ansible Social room on Matrix</a>, and mention <a href="https://matrix.to/#/@newsbot:ansible.im"><code>newsbot</code></a> to have your news item tagged for review for the next weekly issue!</p>
</div>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="a-deeper-look-red-hat-named-a-leader-in-the-forrester-wave/" class="u-url">A Deeper Look, Red Hat Named a Leader in the Forrester Wave</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/andrius-benokraitis/">Andrius Benokraitis</a>
              </span>
            </p>
            <p class="dateline">
              <a href="a-deeper-look-red-hat-named-a-leader-in-the-forrester-wave/" rel="bookmark">
                <time class="published dt-published" datetime="2023-03-23T08:00:00Z" itemprop="datePublished" title="2023-03-23 08:00">2023-03-23 08:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <h2>A Deeper Look: Red Hat Named a Leader in the Forrester Wave</h2>
<p>This week, <a href="https://www.redhat.com/en/about/press-releases/red-hat-named-leader-infrastructure-automation-industry-research-firm">we announced</a>
that Red Hat has been named a leader in The Forrester
Wave Infrastructure Automation, Q1 2023. In
an effort to help explain this result from our point of view, the
following blog answers some of the most frequently asked questions.
 </p>
<h3>What is The Forrester Wave?</h3>
<p>"The Forrester Wave™ is a guide for buyers considering their purchasing
options in a technology marketplace and is based on our analysis and
opinion. To offer an equitable process for all participants, Forrester
follows a publicly available methodology, which we apply consistently
across all participating vendors <a href="https://www.forrester.com/policies/forrester-wave-methodology/">source</a>] </p>
<p><a href="https://www.forrester.com/about-us/">Forrester</a> has been a mainstay
throughout people's automation journeys, and Red Hat is proud to be
recognized as a leader in the results of this Q1 2023 report.</p>
<h3>What were the results?</h3>
<p>Red Hat, specifically focused on Ansible Automation Platform, <a href="https://www.redhat.com/en/about/press-releases/red-hat-named-leader-infrastructure-automation-industry-research-firm">has been named a leader</a> in the Q1, 2023 Forrester Wave™ Infrastructure Automation report. </p>
<p>Refer to the following graphic, that can be viewed in the <a href="https://www.redhat.com/en/resources/forrester-wave-infrastructure-automation-analyst-asset">final report</a>.</p>
<h3>Why is this significant to us?</h3>
<p>We believe Forrester is one of the most recognized technology analyst
firms in the IT space, and that having received a leader ranking
furthers the narrative that Red Hat Ansible Automation Platform is
driving value for organizations looking to make automation a strategic
part of their IT and OT estates. </p>
<h3>How was The Forrester Wave judged? What criteria were used?</h3>
<p>Forrester used a comprehensive method for administering the Wave with a
deliberate, phased approach that took place over many months. Using the
<a href="https://www.forrester.com/policies/forrester-wave-methodology/">Forrester Wave Methodology</a>,
the research team invites vendors to participate, hosts a preliminary
kickoff and planning meeting, provides evaluation criteria, submits
feedback in written and demo formats, and finally provides scoring and
feedback back to the vendor.</p>
<h3>Why were some popular automation solutions not included in the Wave?</h3>
<p>Based on <a href="https://www.forrester.com/policies/wave-vendor-nonparticipation-policy/">The Forrester Wave Vendor Participation Policy</a>
page, the vendor either did not qualify or did not meet inclusion
criteria to be considered. You'll notice that there were vendors that
did qualify and were invited but that they declined to participate
(noted with a gray circle on the graphic).</p>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="bullhorn-95/" class="u-url">Bullhorn #95</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/ansible-collaborative-et-al/">Ansible Collaborative, et al</a>
              </span>
            </p>
            <p class="dateline">
              <a href="bullhorn-95/" rel="bookmark">
                <time class="published dt-published" datetime="2023-03-21T16:00:00Z" itemprop="datePublished" title="2023-03-21 16:00">2023-03-21 16:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <div>
<p><img alt="Ansible Bullhorn banner" src="../images/bullhorn-banner-mango.png"></p>
<p><em>A Newsletter for the Ansible Developer Community</em>
<em>Issue #95, 2023-03-20 (<a href="https://us19.campaign-archive.com/home/?u=56d874e027110e35dea0e03c1&amp;id=d6635f5420">Past Issues</a>)</em></p>
<p>Welcome to <a href="https://github.com/ansible/community/wiki/News#the-bullhorn">The Bullhorn</a>, our newsletter for the Ansible developer community. If you have any questions or content you’d like to share, you're welcome to chat with us in the <a href="https://matrix.to/#/#social:ansible.com">Ansible Social room on Matrix</a>, and mention <a href="https://matrix.to/#/@newsbot:ansible.im"><code>newsbot</code></a> to have your news item tagged for review for the next weekly issue!</p>
</div>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="providing-terraform-with-that-ansible-magic/" class="u-url">Providing Terraform with that Ansible Magic</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/nuno-martins/">Nuno Martins</a>
              </span>
            </p>
            <p class="dateline">
              <a href="providing-terraform-with-that-ansible-magic/" rel="bookmark">
                <time class="published dt-published" datetime="2023-03-20T00:00:00Z" itemprop="datePublished" title="2023-03-20 00:00">2023-03-20 00:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <h2>Providing Terraform with that Ansible Magic</h2>
<p>Late last year, we introduced a Red Hat Ansible Certified Collection
Collection for Terraform.
This was an important step in automation, as these two tools really are
great together and leveraging Ansible\'s ability to orchestrate other
tools in the enterprise made this a no-brainer. Terraform with its
infrastructure as code (IaC) provisioning and Ansible's strength in
configuration as code are a synergy that cannot be ignored - we are
better together! Organizations are now in the position to utilize their
existing infrastructure as code manifests and extend their automation
with Terraform and Ansible together.  </p>
<p>Now, we are back with help
from our partners at Kyndryl and XLAB and adding more value and magic to
infrastructure as code - This time we have some extra muscle with an
addition to the Red Hat Ansible Certified Content Collection: The
Ansible provider for Terraform.</p>
<p>So what does the provider help us with?</p>
<p>Without a provider, we would need to rely on inventory plugins for the
different cloud platforms and use filters to grab instance information
from our freshly "Terraformed" infrastructure. This allows us to
update our inventory so we can run automated tasks against these hosts.
This is pretty smooth in a workflow especially if you are using the
automation controller with a workflow. However, this scenario is not
without complexity, and what about the Terraform users who are not
working with automation controller? How can we leverage Ansible and
bring these two tools together? The Ansible provider for Terraform is
here to help us!</p>
<p>With the Ansible provider in the Collection, we are able to define the
use of an Ansible inventory in the <code>main.tf</code> file and once the project is
initialized and built by Terraform, we can gather Terraform resource
information from the state file and push it into an inventory.</p>
<p>Let's look a bit closer:</p>
<div class="code"><pre class="code literal-block"><span class="err">…</span><span class="n">main</span><span class="o">.</span><span class="n">tf</span>

<span class="n">terraform</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">required_providers</span><span class="w"> </span><span class="p">{</span><span class="w">                     </span><span class="c1">#### ansible provider</span>
<span class="w">    </span><span class="n">ansible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"~&gt; 0.0.1"</span>
<span class="w">      </span><span class="n">source</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"terraform-ansible.com/ansibleprovider/ansible"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">aws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">source</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"hashicorp/aws"</span>
<span class="w">      </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"~&gt; 4.0"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
<span class="err">…</span>

<span class="n">resource</span><span class="w"> </span><span class="s2">"ansible_host"</span><span class="w"> </span><span class="s2">"my_ec2"</span><span class="w"> </span><span class="p">{</span><span class="w">          </span><span class="c1">#### ansible host details</span>
<span class="w">  </span><span class="n">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">aws_instance</span><span class="o">.</span><span class="n">my_ec2</span><span class="o">.</span><span class="n">public_dns</span>
<span class="w">  </span><span class="n">groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"nginx"</span><span class="p">]</span>
<span class="w">  </span><span class="n">variables</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ansible_user</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"ansible"</span><span class="p">,</span>
<span class="w">    </span><span class="n">ansible_ssh_private_key_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"~/.ssh/id_rsa"</span><span class="p">,</span>
<span class="w">    </span><span class="n">ansible_python_interpreter</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"/usr/bin/python3"</span>
</pre></div>

<p>Using the provider in the <code>main.tf</code> allows us
to indicate that we want to use an Ansible inventory and allows us to
specify Ansible host details for the inventory. Terraform can then
initialize and plan the project and embed the details. If we look at the
resulting Terraform state file we can see host details
defined:</p>
<div class="code"><pre class="code literal-block"><span class="err">…</span><span class="n">terraform</span><span class="o">.</span><span class="n">tfstate</span><span class="w">                      </span><span class="c1">#### Inside main.tf</span>


<span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"managed"</span><span class="p">,</span>
<span class="w">      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ansible_host"</span><span class="p">,</span>
<span class="w">      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_ec2"</span><span class="p">,</span>
<span class="w">      </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"provider[</span><span class="se">\"</span><span class="s2">terraform-ansible.com/ansibleprovider/ansible</span><span class="se">\"</span><span class="s2">]"</span><span class="p">,</span>
<span class="w">      </span><span class="s2">"instances"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="s2">"schema_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">          </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="s2">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="s2">"nginx"</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ec2-18-130-240-228.eu-west-2.compute.amazonaws.com"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ec2-18-130-240-228.eu-west-2.compute.amazonaws.com"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="s2">"ansible_python_interpreter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/usr/bin/python3"</span><span class="p">,</span>
<span class="w">              </span><span class="s2">"ansible_ssh_private_key_file"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~/.ssh/id_rsa"</span><span class="p">,</span>
<span class="w">              </span><span class="s2">"ansible_user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ansible"</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">},</span>
<span class="err">…</span>
</pre></div>

<p>Taking a deeper look at the inventory, we can see that the plugin has
populated instance data from the defined resource in the Terraform state
file.</p>
<div class="code"><pre class="code literal-block">…inventory.yml
---
plugin: cloud.terraform.terraform_provider
</pre></div>

<div class="code"><pre class="code literal-block"><span class="n">ansible</span><span class="o">-</span><span class="n">inventory</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="n">inventory</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="o">--</span><span class="n">graph</span><span class="w"> </span><span class="o">--</span><span class="n">vars</span>

<span class="err">@</span><span class="n">all</span><span class="p">:</span>
<span class="w">  </span><span class="o">|--</span><span class="err">@</span><span class="n">nginx</span><span class="p">:</span>
<span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="o">|--</span><span class="n">ec2</span><span class="o">-</span><span class="mi">18</span><span class="o">-</span><span class="mi">130</span><span class="o">-</span><span class="mi">240</span><span class="o">-</span><span class="mf">228.</span><span class="n">eu</span><span class="o">-</span><span class="n">west</span><span class="o">-</span><span class="mf">2.</span><span class="n">compute</span><span class="o">.</span><span class="n">amazonaws</span><span class="o">.</span><span class="n">com</span>
<span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="o">|--</span><span class="p">{</span><span class="n">ansible_python_interpreter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">python3</span><span class="p">}</span>
<span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="o">|--</span><span class="p">{</span><span class="n">ansible_ssh_private_key_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="p">}</span>
<span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="o">|--</span><span class="p">{</span><span class="n">ansible_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ubuntu</span><span class="p">}</span>
<span class="w">  </span><span class="o">|--</span><span class="err">@</span><span class="n">ungrouped</span><span class="p">:</span>
</pre></div>

<p>We are now able to run playbooks against this inventory and automate
the configuration or additional post-provisioning tasks on our hosts
without any hassle.</p>
<div class="code"><pre class="code literal-block"><span class="n">Step</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="err">…</span><span class="n">terraform</span><span class="w"> </span><span class="n">plan</span>
<span class="n">Step</span><span class="w"> </span><span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="err">…</span><span class="n">terraform</span><span class="w"> </span><span class="n">apply</span>

<span class="err">…</span><span class="n">Deploying</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">Terraform</span><span class="err">…</span>


<span class="n">Apply</span><span class="w"> </span><span class="n">complete</span><span class="o">!</span><span class="w"> </span><span class="n">Resources</span><span class="o">:</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">added</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">changed</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">destroyed</span><span class="p">.</span>
<span class="o">++</span><span class="w"> </span><span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="n">inventory</span><span class="p">.</span><span class="n">yml</span><span class="w"> </span><span class="n">playbook</span><span class="p">.</span><span class="n">yml</span>

<span class="n">PLAY</span><span class="w"> </span><span class="p">[</span><span class="n">Install</span><span class="w"> </span><span class="n">nginx</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="n">host</span><span class="p">]</span><span class="w"> </span><span class="o">*****************************************************************************************</span>

<span class="n">TASK</span><span class="w"> </span><span class="p">[</span><span class="n">wait_for_connection</span><span class="p">]</span><span class="w"> </span><span class="o">**************************************************************************************************</span>
<span class="n">The</span><span class="w"> </span><span class="n">authenticity</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">host</span><span class="w"> </span><span class="err">'</span><span class="n">ec2</span><span class="mi">-18-130-240</span><span class="mf">-228.</span><span class="n">eu</span><span class="o">-</span><span class="n">west</span><span class="mf">-2.</span><span class="n">compute</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="p">(</span><span class="mf">18.130.240.228</span><span class="p">)</span><span class="err">'</span><span class="w"> </span><span class="n">can</span><span class="err">'</span><span class="n">t</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">established</span><span class="p">.</span>
<span class="n">ECDSA</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">fingerprint</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">SHA256</span><span class="o">:</span><span class="n">jRqiAGPDzuYGe</span><span class="o">+</span><span class="n">l7jNsmQays2qb</span><span class="o">/</span><span class="n">C</span><span class="o">/</span><span class="n">SJqtnH6pc42ns</span><span class="p">.</span>
<span class="n">Are</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">continue</span><span class="w"> </span><span class="n">connecting</span><span class="w"> </span><span class="p">(</span><span class="n">yes</span><span class="o">/</span><span class="n">no</span><span class="o">/</span><span class="p">[</span><span class="n">fingerprint</span><span class="p">])</span><span class="o">?</span><span class="w"> </span><span class="n">yes</span>
<span class="nl">ok</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">ec2</span><span class="mi">-18-130-240</span><span class="mf">-228.</span><span class="n">eu</span><span class="o">-</span><span class="n">west</span><span class="mf">-2.</span><span class="n">compute</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">com</span><span class="p">]</span>

<span class="n">TASK</span><span class="w"> </span><span class="p">[</span><span class="n">setup</span><span class="p">]</span><span class="w"> </span><span class="o">****************************************************************************************************************</span>
<span class="nl">ok</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">ec2</span><span class="mi">-18-130-240</span><span class="mf">-228.</span><span class="n">eu</span><span class="o">-</span><span class="n">west</span><span class="mf">-2.</span><span class="n">compute</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">com</span><span class="p">]</span>

<span class="n">TASK</span><span class="w"> </span><span class="p">[</span><span class="n">Install</span><span class="w"> </span><span class="n">nginx</span><span class="p">]</span><span class="w"> </span><span class="o">********************************************************************************************************</span>
<span class="nl">changed</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">ec2</span><span class="mi">-18-130-240</span><span class="mf">-228.</span><span class="n">eu</span><span class="o">-</span><span class="n">west</span><span class="mf">-2.</span><span class="n">compute</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">com</span><span class="p">]</span>

<span class="n">TASK</span><span class="w"> </span><span class="p">[</span><span class="n">Start</span><span class="w"> </span><span class="n">nginx</span><span class="p">]</span><span class="w"> </span><span class="o">**********************************************************************************************************</span>
<span class="nl">ok</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">ec2</span><span class="mi">-18-130-240</span><span class="mf">-228.</span><span class="n">eu</span><span class="o">-</span><span class="n">west</span><span class="mf">-2.</span><span class="n">compute</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">com</span><span class="p">]</span>

<span class="n">PLAY</span><span class="w"> </span><span class="n">RECAP</span><span class="w"> </span><span class="o">******************************************************************************************************************</span>
<span class="n">ec2</span><span class="mi">-18-130-240</span><span class="mf">-228.</span><span class="n">eu</span><span class="o">-</span><span class="n">west</span><span class="mf">-2.</span><span class="n">compute</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">com</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">ok</span><span class="o">=</span><span class="mi">4</span><span class="w">    </span><span class="n">changed</span><span class="o">=</span><span class="mi">1</span><span class="w">    </span><span class="n">unreachable</span><span class="o">=</span><span class="mi">0</span><span class="w">    </span><span class="n">failed</span><span class="o">=</span><span class="mi">0</span><span class="w">    </span><span class="n">skipped</span><span class="o">=</span><span class="mi">0</span><span class="w">    </span><span class="n">rescued</span><span class="o">=</span><span class="mi">0</span><span class="w">    </span><span class="n">ignored</span><span class="o">=</span><span class="mi">0</span>
</pre></div>

<p>This new provider is extremely useful when you are using Terraform for deployments while leveraging Ansible for cloud operations like application deployments and CI/CD pipelines, Lifecycle management and enforcement, OS patching and maintenance.
With this provider being part of the Red Hat Ansible Certified Content Collection, we also have ongoing maintenance and support available!</p>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="kubernetes-meets-event-driven-ansible/" class="u-url">Kubernetes Meets Event-Driven Ansible</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/andrew-block/">Andrew Block</a>
              </span>
            </p>
            <p class="dateline">
              <a href="kubernetes-meets-event-driven-ansible/" rel="bookmark">
                <time class="published dt-published" datetime="2023-03-16T13:00:00Z" itemprop="datePublished" title="2023-03-16 13:00">2023-03-16 13:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <h2>Kubernetes Meets Event-Driven Ansible</h2>
<p>In today's fast-paced world, every second counts and the ability to react to activities in a timely fashion can mean the difference between satisfying the needs of consumers and meeting Service-Level Agreements. Each are goals of <a href="https://www.ansible.com/use-cases/event-driven-automation">Event-Driven Ansible</a>, which seeks to further the reach of Ansible based automation by responding to events that meet certain criteria. These events can originate from a variety of sources, such as from an HTTP endpoint, messages on a queue or topic, or from public cloud resources. Kubernetes has become synonymous with managing infrastructure and applications in cloud native architectures and many organizations are reliant on these systems for running their business critical workloads. Automation and Kubernetes go hand in hand and Ansible already plays a role within this ecosystem. A new capability leveraging the Event-Driven Ansible framework is now available that extends the integration between both Ansible and Kubernetes so that Ansible automation activities can be triggered based on events and actions occurring within a Kubernetes cluster.</p>
<p>Event-Driven Ansible is designed using a concept called Rulebooks which consists of three main components:</p>
<ul>
<li>Actions - Triggering the execution of assets including an Ansible Playbook or module</li>
<li>Rules - Determination of whether received events match certain conditions</li>
<li>Sources - Origination of events from external entities that are consumed and processed within the Ansible eventing framework</li>
</ul>
<p>There is a wide ecosystem of solutions available to manage Kubernetes from Ansible, which is provided primarily through the <a href="https://github.com/ansible-collections/kubernetes.core">kubernetes.core collection</a>. This Collection contains everything ranging from mechanisms to manage resources within a Kubernetes cluster, support for the Helm package manager to leveraging a Kubernetes cluster as an inventory source. There are capabilities made available now through the integration of Kubernetes and the Event-Driven Ansible framework. Event sources enable the consumption of changes originating from a Kubernetes cluster, which can be used to trigger automation to respond and act based on the received content and the configured rules. Let’s explore how to take advantage of this newly created capability to further the integration between Kubernetes and Ansible.</p>
<p>The assets related to Event-Driven Ansible and Kubernetes are located within the <a href="https://galaxy.ansible.com/sabre1041/eda">sabre1041.eda collection</a> within Ansible Galaxy. Ensure that the control node where the Ansible automation will be executed has the necessary tooling installed and configured. This includes Ansible Core, the tooling associated with Event-Driven Ansible, and the Collection containing the Event-Driven Ansible Kubernetes integration. Consult the associated documentation for both <a href="https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html">Ansible Core</a> and <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/">Event-Driven Ansible</a> for the target Operating System and installation method.</p>
<p>Once both Ansible Core and Event-Driven Ansible have been installed and configured, install the sabre1041.eda collection by executing the following command:</p>
<div class="code"><pre class="code literal-block">ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>sabre1041.eda
</pre></div>

<p>This Collection also requires that the Python <a href="https://requests.readthedocs.io/en/latest/">requests</a> package be installed which can be facilitated by executing the following command:</p>
<div class="code"><pre class="code literal-block">pip<span class="w"> </span>install<span class="w"> </span>requests
</pre></div>

<p>Now that all of the prerequisite tooling has been met, attention can be turned to how a Rulebook can be configured to take advantage of the Kubernetes integration. Events in the Event-Driven Ansible architecture are configured within the sources section of a rulebook. One or more sources can be specified within a rulebook enabling a robust set of conditions and actions to be configured.</p>
<p>A basic rulebook that takes advantage of the k8s event source plugin from the Collection is shown below:</p>
<div class="code"><pre class="code literal-block"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Listen for newly added ConfigMap resources</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span>
<span class="w">  </span><span class="nt">sources</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sabre1041.eda.k8s</span><span class="p">:</span>
<span class="w">        </span><span class="nt">api_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">        </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="w">        </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Notify</span>
<span class="w">      </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">event.type == "ADDED"</span>
<span class="w">      </span><span class="nt">action</span><span class="p">:</span>
<span class="w">        </span><span class="nt">debug</span><span class="p">:</span>
</pre></div>

<p>The k8s plugin is modeled in a similar manner to that of the <a href="https://docs.ansible.com/ansible/latest/collections/kubernetes/core/k8s_module.html">k8s module</a> from the kubernetes.core collection, so anyone with familiarity working with this module will feel at home when working with this k8s source plugin.</p>
<p>The logic of this rulebook is as follows:</p>
<ol>
<li>Connect to a remote Kubernetes cluster and consume changes to ConfigMap resources that occur within the default namespace</li>
<li>The k8s source plugin includes the type and content to the event object whenever a change occurs within the Kubernetes cluster</li>
<li>Execute the debug action which will print out the event and any other associated variables only when the type property on the event is equal to "ADDED" (whenever a ConfigMap is added to the cluster).</li>
</ol>
<p>While this rulebook monitors for changes in a specific namespace, support is available for monitoring changes across an entire Kubernetes cluster by omitting the use of the namespace parameter in the source plugin. If access to the default namespace is forbidden, feel free to select another namespace where access is granted.</p>
<p>To demonstrate the use of this rulebook, add the previously provided content to a new rulebook file called k8s-eda-demo.yaml. In addition, ensure that the local machine is authenticated to a Kubernetes cluster or customize the plugin parameters to specify the location of the Kubernetes cluster that should be used. Consult the <a href="https://github.com/sabre1041/sabre1041.eda/blob/main/docs/sabre1041.eda.k8s_source_plugin.rst">plugin documentation</a> for the available options.</p>
<p>Create a simple <a href="https://docs.ansible.com/ansible/latest//inventory_guide/intro_inventory.html#intro-inventory">inventory</a> in a file called inventory with the following content:</p>
<div class="code"><pre class="code literal-block">localhost
</pre></div>

<p>Run the rulebook to begin consuming events by executing the following command:</p>
<div class="code"><pre class="code literal-block">ansible-rulebook<span class="w"> </span>-i<span class="w"> </span>inventory<span class="w"> </span>--rulebook<span class="w"> </span>k8s-eda-demo.yaml<span class="w"> </span>--verbose
</pre></div>

<p>With the rulebook monitoring for ConfigMap changes in the default namespace, create a new ConfigMap in the default namespace to demonstrate events are being captured appropriately. This task can be accomplished by using the Kubernetes CLI (kubectl) by executing the following command:</p>
<div class="code"><pre class="code literal-block">kubectl<span class="w"> </span>create<span class="w"> </span>configmap<span class="w"> </span>-n<span class="w"> </span>default<span class="w"> </span>eda-example<span class="w"> </span>--from-literal<span class="o">=</span><span class="nv">message</span><span class="o">=</span><span class="s2">"Kubernetes Meets Event-Driven Ansible"</span>
</pre></div>

<p>Observe the following has been captured and displayed in the window where the ansible-rulebook command is being executed.</p>
<div class="code"><pre class="code literal-block">kwargs:
<span class="o">{</span><span class="s1">'facts'</span>:<span class="w"> </span><span class="o">{}</span>,
<span class="w"> </span><span class="s1">'hosts'</span>:<span class="w"> </span><span class="o">[</span><span class="s1">'all'</span><span class="o">]</span>,
<span class="w"> </span><span class="s1">'inventory'</span>:<span class="w"> </span><span class="s1">'localhost'</span>,
<span class="w"> </span><span class="s1">'project_data_file'</span>:<span class="w"> </span>None,
<span class="w"> </span><span class="s1">'ruleset'</span>:<span class="w"> </span><span class="s1">'Listen for newly added ConfigMap resources'</span>,
<span class="w"> </span><span class="s1">'source_rule_name'</span>:<span class="w"> </span><span class="s1">'Notify'</span>,
<span class="w"> </span><span class="s1">'source_ruleset_name'</span>:<span class="w"> </span><span class="s1">'Listen for newly added ConfigMap resources'</span>,
<span class="w"> </span><span class="s1">'variables'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'event'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'resource'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'apiVersion'</span>:<span class="w"> </span><span class="s1">'v1'</span>,
<span class="w">                                      </span><span class="s1">'data'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'message'</span>:<span class="w"> </span><span class="s1">'Kubernetes Meets '</span>
<span class="w">                                                          </span><span class="s1">'Event-Driven '</span>
<span class="w">                                                          </span><span class="s1">'Ansible'</span><span class="o">}</span>,
<span class="w">                                      </span><span class="s1">'kind'</span>:<span class="w"> </span><span class="s1">'ConfigMap'</span>,
<span class="w">                                      </span><span class="s1">'metadata'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'creationTimestamp'</span>:<span class="w"> </span><span class="s1">'2022-12-25T17:40:43Z'</span>,
<span class="w">                                                   </span><span class="s1">'managedFields'</span>:<span class="w"> </span><span class="o">[{</span><span class="s1">'apiVersion'</span>:<span class="w"> </span><span class="s1">'v1'</span>,
<span class="w">                                                                      </span><span class="s1">'fieldsType'</span>:<span class="w"> </span><span class="s1">'FieldsV1'</span>,
<span class="w">                                                                      </span><span class="s1">'fieldsV1'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'f:data'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'.'</span>:<span class="w"> </span><span class="o">{}</span>,
<span class="w">                                                                                              </span><span class="s1">'f:message'</span>:<span class="w"> </span><span class="o">{}}}</span>,
<span class="w">                                                                      </span><span class="s1">'manager'</span>:<span class="w"> </span><span class="s1">'kubectl-create'</span>,
<span class="w">                                                                      </span><span class="s1">'operation'</span>:<span class="w"> </span><span class="s1">'Update'</span>,
<span class="w">                                                                      </span><span class="s1">'time'</span>:<span class="w"> </span><span class="s1">'2022-12-25T17:40:43Z'</span><span class="o">}]</span>,
<span class="w">                                                   </span><span class="s1">'name'</span>:<span class="w"> </span><span class="s1">'eda-example'</span>,
<span class="w">                                                   </span><span class="s1">'namespace'</span>:<span class="w"> </span><span class="s1">'default'</span>,
<span class="w">                                                   </span><span class="s1">'resourceVersion'</span>:<span class="w"> </span><span class="s1">'119407'</span>,
<span class="w">                                                   </span><span class="s1">'uid'</span>:<span class="w"> </span><span class="s1">'2862db59-8990-4a37-9433-50dcfbaa6d71'</span><span class="o">}}</span>,
<span class="w">                         </span><span class="s1">'type'</span>:<span class="w"> </span><span class="s1">'ADDED'</span><span class="o">}</span>,
<span class="w">               </span><span class="s1">'fact'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'resource'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'apiVersion'</span>:<span class="w"> </span><span class="s1">'v1'</span>,
<span class="w">                                     </span><span class="s1">'data'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'message'</span>:<span class="w"> </span><span class="s1">'Kubernetes Meets '</span>
<span class="w">                                                         </span><span class="s1">'Event-Driven '</span>
<span class="w">                                                         </span><span class="s1">'Ansible'</span><span class="o">}</span>,
<span class="w">                                     </span><span class="s1">'kind'</span>:<span class="w"> </span><span class="s1">'ConfigMap'</span>,
<span class="w">                                     </span><span class="s1">'metadata'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'creationTimestamp'</span>:<span class="w"> </span><span class="s1">'2022-12-25T17:40:43Z'</span>,
<span class="w">                                                  </span><span class="s1">'managedFields'</span>:<span class="w"> </span><span class="o">[{</span><span class="s1">'apiVersion'</span>:<span class="w"> </span><span class="s1">'v1'</span>,
<span class="w">                                                                     </span><span class="s1">'fieldsType'</span>:<span class="w"> </span><span class="s1">'FieldsV1'</span>,
<span class="w">                                                                     </span><span class="s1">'fieldsV1'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'f:data'</span>:<span class="w"> </span><span class="o">{</span><span class="s1">'.'</span>:<span class="w"> </span><span class="o">{}</span>,
<span class="w">                                                                                             </span><span class="s1">'f:message'</span>:<span class="w"> </span><span class="o">{}}}</span>,
<span class="w">                                                                     </span><span class="s1">'manager'</span>:<span class="w"> </span><span class="s1">'kubectl-create'</span>,
<span class="w">                                                                     </span><span class="s1">'operation'</span>:<span class="w"> </span><span class="s1">'Update'</span>,
<span class="w">                                                                     </span><span class="s1">'time'</span>:<span class="w"> </span><span class="s1">'2022-12-25T17:40:43Z'</span><span class="o">}]</span>,
<span class="w">                                                  </span><span class="s1">'name'</span>:<span class="w"> </span><span class="s1">'eda-example'</span>,
<span class="w">                                                  </span><span class="s1">'namespace'</span>:<span class="w"> </span><span class="s1">'default'</span>,
<span class="w">                                                  </span><span class="s1">'resourceVersion'</span>:<span class="w"> </span><span class="s1">'119407'</span>,
<span class="w">                                                  </span><span class="s1">'uid'</span>:<span class="w"> </span><span class="s1">'2862db59-8990-4a37-9433-50dcfbaa6d71'</span><span class="o">}}</span>,
<span class="w">                        </span><span class="s1">'type'</span>:<span class="w"> </span><span class="s1">'ADDED'</span><span class="o">}}}</span>
</pre></div>

<p>As shown in the output above, the details associated with the newly created ConfigMap within the Kubernetes cluster and the event have been captured.</p>
<p>After confirming that the Kubernetes source plugin is capturing events successfully, let’s demonstrate how one could make use of these events within an Ansible Playbook. Create a new file called k8s-eda-demo-playbook.yaml with the following content.</p>
<div class="code"><pre class="code literal-block"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span>
<span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ansible.builtin.debug</span><span class="p">:</span>
<span class="w">        </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">"ConfigMap</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">namespace</span><span class="nv"> </span><span class="s">'{{</span><span class="nv"> </span><span class="s">event.resource.metadata.namespace</span><span class="nv"> </span><span class="s">}}'</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">'{{</span><span class="nv"> </span><span class="s">event.resource.metadata.name</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">‘{{</span><span class="nv"> </span><span class="s">event.type</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">capitalize</span><span class="nv"> </span><span class="s">}}’</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">message</span><span class="nv"> </span><span class="s">‘{{</span><span class="nv"> </span><span class="s">event.resource.data.message}}'"</span>
</pre></div>

<p>This playbook demonstrates how to obtain properties that are included on the captured event. The type property will display "Added" as the playbook will only execute when ConfigMaps that have been created. The ConfigMap object itself can be accessed by referencing the resource property on the event. The standard Kubernetes manifest for a ConfigMap can then be traversed, such as the <em>namespace, name</em> as well as specific <em>data values</em>.</p>
<p>Update the contents of the rulebook in the k8s-eda-demo.yaml file to invoke the newly created playbook instead of simply printing out the contents by using the run_playbook action as shown below:</p>
<div class="code"><pre class="code literal-block"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Listen for newly added ConfigMap resources</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span>
<span class="w">  </span><span class="nt">sources</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sabre1041.eda.k8s</span><span class="p">:</span>
<span class="w">        </span><span class="nt">api_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">        </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="w">        </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Execute Playbook</span>
<span class="w">      </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">event.type == "ADDED"</span>
<span class="w">      </span><span class="nt">action</span><span class="p">:</span>
<span class="w">        </span><span class="nt">run_playbook</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k8s-eda-demo-playbook.yaml</span>
</pre></div>

<p>Once again, execute the k8s-eda-demo-playbook.yaml rulebook to begin listing for ConfigMap’s added to the <em>default</em> namespace.</p>
<div class="code"><pre class="code literal-block">ansible-rulebook<span class="w"> </span>-i<span class="w"> </span>inventory<span class="w"> </span>--rulebook<span class="w"> </span>k8s-eda-demo.yaml<span class="w"> </span>--verbose
</pre></div>

<p>Delete and recreate the ConfigMap to trigger the playbook.</p>
<div class="code"><pre class="code literal-block">kubectl<span class="w"> </span>delete<span class="w"> </span>configmap<span class="w"> </span>-n<span class="w"> </span>default<span class="w"> </span>eda-example

kubectl<span class="w"> </span>create<span class="w"> </span>configmap<span class="w"> </span>-n<span class="w"> </span>default<span class="w"> </span>eda-example<span class="w"> </span>--from-literal<span class="o">=</span><span class="nv">message</span><span class="o">=</span><span class="s2">"Kubernetes Meets Event-Driven Ansible"</span>
</pre></div>

<p>Observe that the playbook has been triggered and produces output similar to the following:</p>
<div class="code"><pre class="code literal-block">TASK<span class="w"> </span><span class="o">[</span>ansible.builtin.debug<span class="o">]</span><span class="w"> </span>***************************************************
ok:<span class="w"> </span><span class="o">[</span>localhost<span class="o">]</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="s2">"msg"</span>:<span class="w"> </span><span class="s2">"ConfigMap in namespace 'default' with name 'eda-example ‘Added’ with the message ‘Kubernetes Meets Event-Driven Ansible'"</span>
<span class="o">}</span>
</pre></div>

<p>While this example only prints out a simple message related to the content of the event received, it provides a demonstration of how to make use of the capabilities enabled by the Kubernetes integration. By adding Kuberentes as an event source and into the Event-Driven Ansible ecosystem, it becomes an essential integration to help support organizations that are leveraging Kubernetes to maintain crucial components of their business and to trigger automation as desired.</p>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="bullhorn-94/" class="u-url">Bullhorn #94</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/ansible-collaborative-et-al/">Ansible Collaborative, et al</a>
              </span>
            </p>
            <p class="dateline">
              <a href="bullhorn-94/" rel="bookmark">
                <time class="published dt-published" datetime="2023-03-11T06:15:00Z" itemprop="datePublished" title="2023-03-11 06:15">2023-03-11 06:15</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <div>
<p><img alt="Ansible Bullhorn banner" src="../images/bullhorn-banner-mango.png"></p>
<p><em>A Newsletter for the Ansible Developer Community</em>
<em>Issue #94, 2023-03-10 (<a href="https://us19.campaign-archive.com/home/?u=56d874e027110e35dea0e03c1&amp;id=d6635f5420">Past Issues</a>)</em></p>
<p>Welcome to <a href="https://github.com/ansible/community/wiki/News#the-bullhorn">The Bullhorn</a>, our newsletter for the Ansible developer community. If you have any questions or content you’d like to share, you're welcome to chat with us in the <a href="https://matrix.to/#/#social:ansible.com">Ansible Social room on Matrix</a>, and mention <a href="https://matrix.to/#/@newsbot:ansible.im"><code>newsbot</code></a> to have your news item tagged for review for the next weekly issue!</p>
</div>
          </div>
      </article><br><hr>
<br>
</div>
          <ul class="pager postindexpager clearfix">
<li class="previous"><a href="." rel="prev">Newer posts</a></li>
            <li class="next"><a href="index-21.html" rel="next">Older posts</a></li>
        </ul>
<!--End of body content-->
</div>
        <div class="content-slim redhat-footer">
      <div class="footer-left">
        <ul class="footer-left-links">
<li>
            <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a>
          </li>
          <li>
            <a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy policy</a>
          </li>
          <li>
            <a href="https://docs.ansible.com/ansible/latest/community/code_of_conduct.html" target="_blank">Code of conduct</a>
          </li>
        </ul>
</div>
      <div class="footer-right">
        <span class="redhat">Powered by</span>
        <span class="redhat-logo">
          <a href="https://www.redhat.com/en/technologies/management/ansible" target="_blank">
            <img src="../assets/images/redhat_reversed.svg" alt="Red Hat logo." width="96" height="28"></a>
        </span>
      </div>
    </div>

</div>

            <script src="../assets/js/jquery.min.js"></script><script src="../assets/js/popper.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
</script><script src="../assets/js/clipboard.min.js" type="text/javascript"></script><script src="../assets/js/clipboard.js" type="text/javascript"></script>
</body>
</html>
