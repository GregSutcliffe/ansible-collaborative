<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Ansible Collaborative Website">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ansible Collaborative (old posts, page 5) | Ansible Collaborative</title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<!-- Red Hat fonts --><link rel="stylesheet" href="https://static.redhat.com/libs/redhat/redhat-font/2.0.0/webfonts/red-hat-font.css">
<!-- Font Awesome --><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
<!-- Fork Awesome --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css" integrity="sha256-XoaMnoYC5TH6/+ihMEnospgm0J1PM/nioxbOUdnM8HY=" crossorigin="anonymous">
<!-- Sass compiled css  --><link rel="stylesheet" href="../assets/css/main.css">
<link rel="stylesheet" href="../assets/css/redhat-footer.css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../rss.xml">
<link rel="canonical" href="https://ansible.com/blog/index-5.html">
<link rel="prev" href="index-6.html" type="text/html">
<link rel="next" href="index-4.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body id="top">

<div class="global-container" id="content" role="main">
<!-- Start menubar -->
<nav class="navbar navbar-expand-lg static-top mb-4 navbar-padding full-width-bg   navbar-dark   bg-pool   "><div class="masthead">
    <!-- This keeps the margins nice -->
    <a class="navbar-brand" href="../">
        <img src="../images/ansible_logo-small-15.png" alt="Ansible community logo" id="logo" class="d-inline-block align-top" width="50" height="50"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon nav-toggle-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="bs-navbar">
      <ul class="navbar-nav mr-auto"></ul>
<ul class="navbar-nav navbar-right">
<li class="nav-item dropdown">
	        <a href="#" class="nav-link nav-link-color dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    <i class=""></i> Documentation
                </a>
		<div class="dropdown-menu dropdown-menu-border">
	    
                    <a href="https://docs.ansible.com/" class="dropdown-item">
		        <i class=""></i> Project documentation
                    </a>
                    <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/" class="dropdown-item">
		        <i class=""></i> Ansible Automation Platform documentation
                    </a>
            </div>
                 </li>
<li class="nav-item">
		     <a href="https://galaxy.ansible.com/" target="_blank" class="nav-link nav-link-color">
		         <i class=""></i> Galaxy
		     </a>
		 </li>
                 <li class="nav-item">
		     <a href="https://forum.ansible.com/" target="_blank" class="nav-link nav-link-color">
		         <i class=""></i> Forum
		     </a>
		 </li>
            <li class="nav-item dropdown">
	        <a href="#" class="nav-link nav-link-color dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    <i class=""></i> Resources
                </a>
		<div class="dropdown-menu dropdown-menu-border">
	    
                    <a href="../how-ansible-works/" class="dropdown-item">
		        <i class=""></i> How Ansible works
                    </a>
                    <a href="../ecosystem/" class="dropdown-item">
		        <i class=""></i> Ansible ecosystem
                    </a>
                    <a href="archive.html" class="dropdown-item">
		        <i class=""></i> Blog
                    </a>
                    <a href="../faq/" class="dropdown-item">
		        <i class=""></i> Frequently asked questions
                    </a>
                    <a href="../ansible-community-training/" class="dropdown-item">
		        <i class=""></i> Ansible community training
                    </a>
                    <a href="../contact-us/" class="dropdown-item">
		        <i class=""></i> Contact us
                    </a>
            </div>
                 </li>
<li class="nav-item">
		     <a href="https://www.redhat.com/en/technologies/management/ansible?sc_cid=7015Y000003szaKQAQ" target="_blank" class="nav-link nav-link-color">
		         <i class=""></i> Ansible Automation Platform
		     </a>
		 </li>

        
      </ul>
</div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav><!-- End default Menubar --><div class="body-content center-band">
        <!--Body content-->
        
    
  <div class="postindex ansible-content">
      <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="bullhorn-2/" class="u-url">Bullhorn #2</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/ansible-collaborative-et-al/">Ansible Collaborative, et al</a>
              </span>
            </p>
            <p class="dateline">
              <a href="bullhorn-2/" rel="bookmark">
                <time class="published dt-published" datetime="2020-05-12T15:00:00Z" itemprop="datePublished" title="2020-05-12 15:00">2020-05-12 15:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <p><img alt="Ansible Bullhorn banner" src="../images/bullhorn-banner-mango.png"></p>
<tr>
<td class="mcnTextContent" style='padding: 0px 18px 9px;font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;word-break: break-word;color: #202020;font-size: 16px;line-height: 150%;text-align: left;' valign="top">

                            <h2 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 26px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">The Bullhorn</h2>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'><em>A Newsletter for the Ansible Developer Community</em><br><br>
Welcome to <em>The Bullhorn</em>, our newsletter for the Ansible developer community. If you have any questions or content you’d like to share, please reach out to us at the-bullhorn@redhat.com.</p>

<h3 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 22px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">
<br>
THE AWX PROJECT RELEASES 11.2.0</h3>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>On April 29th, the AWX team released the newest version of AWX, 11.2.0. Notable changes include the use of collection-based plugins by default for versions of Ansible 2.9 and greater, the new ability to monitor stdout in the CLI for running jobs and workflow jobs, enhancements to the Hashicorp Vault credential plugin, and several bugfixes. Read Rebeccah Hunter’s announcement <a href="https://groups.google.com/forum/?utm_medium=email&amp;utm_source=footer#!msg/awx-project/Soe8kfYnTP8/Xy0hWfW-BQAJ" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">here</a>. For more frequent AWX updates, you can join <a href="https://groups.google.com/forum/?utm_medium=email&amp;utm_source=footer#!forum/awx-project" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">the AWX project mailing list</a>.</p>

<h3 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 22px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">
<br>
ANSIBLE 101 WITH JEFF GEERLING: EPISODE 7</h3>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>In the <a href="https://www.youtube.com/watch?v=FaXVZ60o8L8" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">latest video</a> of his Ansible 101 series, Jeff Geerling explores Ansible Galaxy, ansible-lint, Molecule, and testing Ansible roles and playbooks based on content in his bestselling Ansible book, Ansible for DevOps. You can find the full channel of his Ansible videos <a href="https://www.youtube.com/playlist?list=PL2_OBreMn7FplshFCWYlaN2uS8et9RjNG" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">here</a>. <br>
 </p>

<h3 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 22px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">POLL: DATES FOR NEXT ANSIBLE CONTRIBUTOR SUMMIT</h3>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>We’re planning our next full-day virtual Ansible Contributor Summit sometime in late June or early July, and we’re looking for feedback on proposed dates. Carol Chen has posted <a href="https://doodle.com/poll/d8ttii3zpv5a2ic5" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">a Doodle poll</a> with options for possible dates; if you’re interested in attending, please fill out the poll so that we know which dates are best for everyone. We will close the poll on Friday, May 22nd.<br>
 </p>

<h3 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 22px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">PROOF OF CONCEPT: SERVERLESS ANSIBLE WITH KNATIVE</h3>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'><a href="https://github.com/markito" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">William Oliveira</a> has built a new proof-of-concept for using Ansible and Knative to create event-driven playbooks. The proof-of-concept is a web application that can execute playbooks on demand and send those events to a Knative Event Broker to trigger other applications. Find the source code on GitHub <a href="https://github.com/markito/knative-ansible" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">here</a>. </p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'> </p>

<h3 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 22px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">COMMUNITY METRIC HIGHLIGHT: COMMUNITY.GENERAL COLLECTION</h3>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>As the Ansible community continues to grow, we rely increasingly on metrics to keep track of our progress towards our goals. Following on from the more general metrics in <a href="http://eepurl.com/g0Mr0f" target="_blank" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">Issue 1</a>, we've also started to think about what special handling we might need in addition to metrics for all collections. <a href="https://github.com/ansible-collections/community.general" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">Community.general</a> is one such special case — as the home for most modules in Ansible, it sees a lot of contributors come and go, and content there can run the risk of becoming unmaintained. We need to watch this repository carefully so that we can act as needed.</p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>Below is one graph from the <a href="https://stats.eng.ansible.com/~/admin/community.general.issues.html#opened-closed" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">dashboard</a> we're preparing on this. This graph shows the rate of opened and closed issues per week, as well as a simple statistical test to see if the slope is non-zero. Currently both are essentially flat, suggesting opening and closing of issues is balanced. We've already got several graphs on this report, and we'll be adding more in the future.</p>
 

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'><img src="https://lh6.googleusercontent.com/X6TDUSLWO3VEXFmU9JkwE4pVc6z2_5lA4Jj0_T0sqDhnU0seWMn1MPjnH-yCVRS1nR3SW0yRLKTN4dQ9LsqzuhogaOc3LGuQDb403zhK_AbMX1vuREHZVJ34bDBccWl4RdF_-Dvv" style="border: 0;height: auto !important;outline: none;text-decoration: none;-ms-interpolation-mode: bicubic;" width="624" height="485"></p>
 

<h3 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 22px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">ANSIBLE VIRTUAL MEETUPS</h3>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>The following virtual meetups are being held in the Ansible community over the next month:</p>
<br>
Ansible Minneapolis: CyberArk’s integration with Ansible Automation
<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>Thu, May 21 · 6:30 PM CDT</p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'><a href="https://www.meetup.com/Ansible-Minneapolis/events/sbqkgrybchbcc/" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">https://www.meetup.com/Ansible-Minneapolis/events/sbqkgrybchbcc/</a></p>
 

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>Ansible Northern Virginia: Spring Soiree!</p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>Thu, May 21 · 4:00 PM EDT</p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'><a href="https://www.meetup.com/Ansible-NOVA/events/270368639/" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">https://www.meetup.com/Ansible-NOVA/events/270368639/</a></p>
 

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>Ansible Paris: Webinar #1</p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>Thu, May 14 · 11:00 AM GMT+2</p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'><a href="https://www.meetup.com/Ansible-Paris/events/270584272/" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">https://www.meetup.com/Ansible-Paris/events/270584272/</a></p>
 

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>We are planning more virtual meetups to reach a broader audience, and <strong>we want to hear from you</strong>! Have you started using Ansible recently, or are you a long-time user? How has Ansible improved your workflow or scaled up your automation? What are some of the challenges you’ve faced and lessons learned? Share your experience by presenting at a Virtual Ansible Meetup: <a href="https://forms.gle/aG5zpVkXDVMHLERX9" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">https://forms.gle/aG5zpVkXDVMHLERX9</a><br><br>
You’ll have the option to pre-record the presentation, and be available during the meetup for live Q&amp;A, or deliver the presentation live. We will work with you on the optimal set up, and share with you some cool Ansible swag!</p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'> </p>

<h3 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 22px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">FEEDBACK</h3>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>Have any questions you’d like to ask, or issues you’d like to see covered? Please send us an email to the-bullhorn@redhat.com.</p>

<h2 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 26px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;"> </h2>

                        </td>
                    </tr>
</div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="ansiblefest-2020-is-now-a-virtual-experience/" class="u-url">AnsibleFest 2020 is now a virtual experience</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/ansible/">Ansible</a>
              </span>
            </p>
            <p class="dateline">
              <a href="ansiblefest-2020-is-now-a-virtual-experience/" rel="bookmark">
                <time class="published dt-published" datetime="2020-05-11T00:00:00Z" itemprop="datePublished" title="2020-05-11 00:00">2020-05-11 00:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <h2>AnsibleFest 2020 is now a virtual experience</h2>
<p>Each year, AnsibleFest is one of our favorite events because it brings
together our customers, partners, community members and Red Hatters to
talk about the open source innovations and best practices that are
enabling the future of enterprise technology and automation.</p>
<p>Because the safety of our attendees is our first priority, we have
decided to make AnsibleFest 2020 a virtual experience. We are excited to
connect with everyone virtually, and look forward to expanding our
conversation across the globe. By changing our event platform, we hope
to use this opportunity to collaborate, connect, and chat with more
automation fans than ever before. It is exciting to think about how many
more people will be able to join in on the automation conversation.</p>
<p>The AnsibleFest Virtual Experience will be a free, immersive multi-day
event the week of October 12th, 2020, that will deliver timely and
useful customer keynotes, breakout sessions, direct access to Ansible
experts, and more. You will want to sign up to stay connected and
up-to-date on all things AnsibleFest. </p>
<p><strong>Call for proposals is open</strong></p>
<p>We are still working through the details for the virtual event, but are
very excited to announce that the <a href="https://ansiblefest2020.eventpoint.com/cfp">call for proposals</a> is
<strong>now open through July 15</strong>. We will post additional information on the Ansible Blog
and on the AnsibleFest site as it
becomes available. Stay tuned! </p>
<p>We look forward to hosting this event and thank you all in advance for
your collaboration to make this a great success. </p>
<h3>Frequently Asked Questions</h3>
<h4>Why did you cancel the in-person AnsibleFest event?</h4>
<p>We have been closely monitoring the feasibility of the physical event in
San Diego and have decided to rebuild AnsibleFest 2020 as a virtual
event. Our goal is to serve and support AnsibleFest attendees with a
virtual celebration that captures the immersive AnsibleFest experience,
and allows us to welcome an even larger audience than usual.</p>
<h4>What will you be doing instead of an in-person event?</h4>
<p>We will be hosting the AnsibleFest Virtual Experience, a free, immersive
multi-day event from October 13-14, 2020, that delivers the same
inspiring content from AnsibleFest 2020 - keynotes, breakout sessions,
access to experts, and more.  We are still working through many of the
details for the virtual event, but we are excited about the opportunity
to share content selected to help you transform your organization by
delivering the right Automation strategy, combined with the cultural
change needed to succeed in the constantly  evolving digital journey.</p>
<p>In the current world of Cloud and DevOps, Automation can be used to
enable open ways of working in order to build business resilience and
innovation.</p>
<h4>How do I register for  the AnsibleFest virtual experience?</h4>
<p>Information and details on registration will be announced within the
month of June. Follow Red Hat Ansible - <a href="https://twitter.com/ansible">\@ansible on
Twitter</a> and sign up for information on our
site <a href="http://www.ansiblefest.com/">www.ansiblefest.com</a>  to get all
information as it becomes available.  </p>
<h4>Will there be sponsorship opportunities for the AnsibleFest virtual experience?</h4>
<p>Yes, there will be sponsorship opportunities available. These will be
released later this summer. Questions? Please reach out to the
<a href="mailto:sponsorships@redhat.com">sponsorship team</a></p>
<h4>Will you be having any in-person events later?</h4>
<p>We are exploring that situation, and will announce any plans we have. 
But for now, we hope you can join our virtual experience on October
13-14!</p>
<h4>When is AnsibleFest in 2021?</h4>
<p>A date has not been set for AnsibleFest in 2021.</p>
<h4>What kind of software will be required to view keynotes and interact with the experts at the virtual event? Will users have to install anything?</h4>
<p>It will be web-based, so all you will need is a computer with a
supported browser and an internet connection capable of streaming video.
<a href="https://presentations.akamaized.net/ProductResources/Production/HTML/ComputerTips/ComputerTipsStudio.html">This page has requirements</a>
for desktop browser and operating systems.</p>
<h5>I booked my air travel already.  Can I get a refund?</h5>
<p>We're announcing this well ahead of time in the hopes that we reach our
attendees before they've booked travel. Unfortunately, we are unable to
provide a refund for your air travel.  Check with your airline or travel
agency.  Many airlines are waiving change fees or providing credits for
airfare.</p>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="active-directory-ansible-tower/" class="u-url">Active Directory and Ansible Tower</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/john-lieske/">John Lieske</a>
              </span>
            </p>
            <p class="dateline">
              <a href="active-directory-ansible-tower/" rel="bookmark">
                <time class="published dt-published" datetime="2020-05-06T00:00:00Z" itemprop="datePublished" title="2020-05-06 00:00">2020-05-06 00:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <h2>Active Directory &amp; Ansible Tower</h2>
<p>Welcome to the second installment of our Windows-centric Getting Started series!</p>
<p>Last time we walked you through how Ansible connects to a Windows
host. We've also previously
explored logging into Ansible Tower while authenticating against an LDAP
directory. In this post, we'll go over a few ways you can use Ansible to
manage Microsoft's Active Directory. Since AD plays a role in many
Windows environments, using Ansible to manage Windows will probably
include running commands against the Active Directory domain.</p>
<h3>First, Set Your Protocol</h3>
<p>We'll be using WinRM to connect to Windows hosts, so this means making
sure Ansible or Tower knows that. Machine credentials in Ansible Tower
can be created and used along with variables, but when using Ansible in
a terminal the playbook should make it clear with variables:</p>
<div class="code"><pre class="code literal-block"><span class="o">---</span>
<span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">Your</span><span class="w"> </span><span class="n">Windows</span><span class="w"> </span><span class="n">Playbook</span>
<span class="w">  </span><span class="n">hosts</span><span class="p">:</span><span class="w"> </span><span class="n">win</span>
<span class="w">  </span><span class="n">vars</span><span class="p">:</span>
<span class="w">    </span><span class="n">ansible_ssh_user</span><span class="p">:</span><span class="w"> </span><span class="n">administrator</span>
<span class="w">    </span><span class="n">ansible_ssh_pass</span><span class="p">:</span><span class="w"> </span><span class="n">ThisIsWhereStrongPassesGo</span>
<span class="w">    </span><span class="n">ansible_connection</span><span class="p">:</span><span class="w"> </span><span class="n">winrm</span>
<span class="w">    </span><span class="n">ansible_winrm_server_cert_validation</span><span class="p">:</span><span class="w"> </span><span class="n">ignore</span>

<span class="o">-</span><span class="w"> </span><span class="n">tasks</span><span class="p">:</span>
</pre></div>

<p>Along with using the local admin account/pass, the WinRM connection
method is named specifically. The variable to ignore the certificate
validation is for standalone, non-domain hosts because a domain-joined
instance should have certificates validated on the domain.</p>
<h4>Where's the Domain?</h4>
<p>Speaking of domains, Ansible can spin up a new domain if one doesn't
exist.</p>
<p>In the following example, Ansible (using the previous settings) installs
the AD Domain Services features from Server Management <code>win_feature</code>,
and if there's no domain present it creates the new Active Directory
domain with the provided AD safe mode password <code>win_domain</code>:</p>
<div class="code"><pre class="code literal-block"><span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">Install</span><span class="w"> </span><span class="n">AD</span><span class="w"> </span><span class="n">Services</span><span class="w"> </span><span class="n">feature</span>
<span class="w">  </span><span class="n">win_feature</span><span class="p">:</span>
<span class="w">    </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">AD</span><span class="o">-</span><span class="n">Domain</span><span class="o">-</span><span class="n">Services</span>
<span class="w">    </span><span class="n">include_management_tools</span><span class="p">:</span><span class="w"> </span><span class="n">yes</span>
<span class="w">    </span><span class="n">include_sub_features</span><span class="p">:</span><span class="w"> </span><span class="n">yes</span>
<span class="w">    </span><span class="n">state</span><span class="p">:</span><span class="w"> </span><span class="n">present</span>
<span class="w">  </span><span class="n">register</span><span class="p">:</span><span class="w"> </span><span class="n">result</span>

<span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">forest</span>
<span class="w">  </span><span class="n">win_domain</span><span class="p">:</span>
<span class="w">    </span><span class="n">dns_domain_name</span><span class="p">:</span><span class="w"> </span><span class="n">tycho</span><span class="o">.</span><span class="n">local</span>
<span class="w">    </span><span class="n">safe_mode_password</span><span class="p">:</span><span class="w"> </span><span class="n">RememberTheCant</span><span class="o">!</span>
<span class="w">  </span><span class="n">register</span><span class="p">:</span><span class="w"> </span><span class="n">result</span>

<span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">Reboot</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">creation</span>
<span class="w">  </span><span class="n">win_reboot</span><span class="p">:</span>
<span class="w">    </span><span class="n">msg</span><span class="p">:</span><span class="w"> </span><span class="s2">"Server config in progress; rebooting..."</span>
<span class="w">  </span><span class="n">when</span><span class="p">:</span><span class="w"> </span><span class="n">result</span><span class="o">.</span><span class="n">reboot_required</span>
</pre></div>

<p>After creating the domain, the server sends a message to anyone logged
in that the server is rebooting and then commences to reboot. While not
a production-quality playbook, this is a good example of what can be
configured quickly with a few short plays.</p>
<p>If there's already a domain present for testing there's no need to
create one, but there may be a test machine that should be joined to an
existing domain. Ansible can similarly shorten that task with a few
plays as well:</p>
<div class="code"><pre class="code literal-block"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Configure DNS</span>
<span class="w">  </span><span class="nt">win_dns_client</span><span class="p">:</span>
<span class="w">    </span><span class="nt">adapter_names</span><span class="p">:</span><span class="w"> </span><span class="s">"Ethernet</span><span class="nv"> </span><span class="s">2"</span>
<span class="w">    </span><span class="nt">ipv4_addresses</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.1</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Promote to member</span>
<span class="w">  </span><span class="nt">win_domain_membership</span><span class="p">:</span>
<span class="w">    </span><span class="nt">dns_domain_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tycho.local</span>
<span class="w">    </span><span class="nt">domain_admin_user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">drummer@tycho.local</span>
<span class="w">    </span><span class="nt">domain_admin_password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WeNeed2Hydrate!</span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">domain</span>
<span class="w">  </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">domain_state</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Reboot after joining</span>
<span class="w">  </span><span class="nt">win_reboot</span><span class="p">:</span>
<span class="w">    </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">"Joining</span><span class="nv"> </span><span class="s">domain.</span><span class="nv"> </span><span class="s">Rebooting..."</span>
<span class="w">  </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">domain_state.reboot_required</span>
</pre></div>

<p>The steps are self-explanatory, make sure the machine can communicate
with the directory server (<code>win_dns_client</code>), then join to the domain
(<code>win_domain_membership</code>). The target restarts to complete joining the
directory. Quick and easy.</p>
<h4>What Can It Do?</h4>
<p>Using the <code>win_feature</code> to manage the roles is similar to the
combination of the <code>Install-WindowsFeature</code> and <code>Add-WindowsFeature</code>
Powershell cmdlet. If you're not familiar with the name used for the
feature you're trying to install, use the <code>Get-WindowsFeature</code> cmdlet to
list available features to install.</p>
<p>The Windows domain modules ( <code>win_domain</code>, <code>win_domain_controller</code>,
<code>win_domain_group</code>, <code>win_domain_membership</code>, <code>win_domain_user</code> ) cover
the common tasks run against an Active Directory. For most of the
<a href="http://docs.ansible.com/ansible/latest/modules/list_of_windows_modules.html">Windows modules</a>
a domain account with appropriate privileges should be set as a machine
credential (using DOMAIN/User or User@domain.tld), much like you would
for a local account.</p>
<h4>To Conclude</h4>
<p>In this post, we used WinRM to connect to Windows hosts, had Ansible
install the AD Domain Services features from Server Management using the
<code>win_feature</code> module (or created the new Active Directory domain if
there isn't one already present by using the <code>win_domain</code> module), made
sure the machine can communicate with the directory server using
<code>win_dns_client</code>, then joined it to the domain using
<code>win_domain_membership</code>.</p>
<p>Don't forget to make sure that your playbook for Windows nodes sets the
connection variables by specifically stating <code>ansible_connection: winrm</code>
(required) as well as <code>ansible_winrm_server_cert_validation: ignore</code> (if
you haven't added your local CA as trusted). As shown in the beginning
of this post, those two variables go along with the connecting account
variables after <code>vars:</code> in an Ansible Playbook. In Ansible Tower, those
variables go in the job template.</p>
<p>So now you know how to use Ansible with Microsoft's Active Directory! In
our next post, we'll dive deeper into the package management abilities
you have with Ansible and Windows!</p>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="red-hat-ansible-tower-monitoring-using-prometheus-node-exporter-grafana/" class="u-url">Red Hat Ansible Tower Monitoring Using Prometheus, Node Exporter, and Grafana</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/leonardo-araujo/">Leonardo Araujo</a>
              </span>
            </p>
            <p class="dateline">
              <a href="red-hat-ansible-tower-monitoring-using-prometheus-node-exporter-grafana/" rel="bookmark">
                <time class="published dt-published" datetime="2020-05-06T00:00:00Z" itemprop="datePublished" title="2020-05-06 00:00">2020-05-06 00:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <h2>Red Hat Ansible Tower Monitoring Using Prometheus, Node Exporter, and Grafana</h2>
<p>A crucial piece of automation is ensuring that it runs flawlessly.
Automation Analytics can help by providing insight into health state and organizational
statistics. However, there is often the need to monitor the current
state of  Ansible Tower. Luckily, Ansible Tower does provide metrics via
the API, and they can easily be fed into Grafana.</p>
<p>This blog post will outline how to monitor Ansible Tower environments by
feeding Ansible Tower and operating system metrics into Grafana by using
node_exporter &amp; Prometheus.</p>
<p>To reach that goal we configure Ansible Tower metrics for Prometheus to
be viewed via Grafana and we will use node_exporter to export the
operating system metrics to an operating system (OS)  dashboard in
Grafana. Note that we use Red Hat Enterprise Linux 8 as the OS running
Ansible Tower here. The data flow is outlined below:</p>
<p><img alt="analytics data flow diagram" src="../images/posts/archive/analytics-data-flow-diagram.png"></p>
<p>As you see, Grafana looks for data in Prometheus. Prometheus itself
collects the data in its database by importing them from node_exporters
and from the Ansible Tower APIs.</p>
<p>In this blog post we assume a cluster of three Ansible Tower instances
and an external database. Also please note that this blog post assumes
an already installed instance of Prometheus and Grafana.</p>
<h2>Setup  of node_exporter</h2>
<p>As a first step we will set up node_exporter on the Ansible Tower
servers and the external database. Since node_exporter is not available
in Red Hat Enterprise Linux 8 by default we first have to install it. To
do that we login to our Ansible Tower server, clone the corresponding
git repository and change into the repository directory. See the listing
shown below for reference:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/redhat-cop/tower_grafana_dashboards<span class="w"> </span>

$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>tower_grafana_dashboards/

$<span class="w"> </span>tree
.
├──<span class="w"> </span>install_node_exporter.yaml
├──<span class="w"> </span>metric_servers.json
└──<span class="w"> </span>metric_tower.json

<span class="m">0</span><span class="w"> </span>directories,<span class="w"> </span><span class="m">3</span><span class="w"> </span>files
</pre></div>

<p>Next, we have to perform the actual installation of node_exporter.
Luckily, a playbook to install it is included. Run the
install_node_exporter.yaml playbook to perform the installation of
node_exporter. </p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>ansible-playbook<span class="w"> </span>install_node_exporter.yaml
...
</pre></div>

<p>The output of the playbook is shown below:</p>
<p><img alt="Analytics blog 2" src="../images/posts/archive/analytics-blog-two.png"></p>
<p>After the installation, verify if node_exporter is indeed running and
listens on port 9100. This can easily done with netstat:</p>
<p><img alt="analytics blog 3" src="../images/posts/archive/analytics-blog-three.png"></p>
<p>Repeat these steps on the other Ansible Tower servers as well as on the
external database.</p>
<h2>Validating Ansible Tower metrics</h2>
<p>Next let's shift our focus towards Ansible Tower. Validate that the
Ansible Tower metrics are being displayed correctly by accessing the url
below:</p>
<div class="code"><pre class="code literal-block">https://tower.customer.com/api/v2/metrics
</pre></div>

<p>Accessing the url we should see a listing of all available Ansible Tower
metrics, as shown below:</p>
<p><img alt="analytics blog 4" src="../images/posts/archive/analytics-blog-four.png"></p>
<p>Let's  set up Prometheus to gather these data. First we need to generate
an <a href="https://docs.ansible.com/ansible-tower/latest/html/administration/oauth2_token_auth.html">authentication token on Ansible
Tower</a>:
the token will grant access to Ansible Tower without the need to enter
username and passwords each time it is accessed.</p>
<p>To generate the token, access the Ansible Tower console and click on
your username that appears at the top of the page. From there, click on
"<strong>Tokens"</strong> and then on the + sign. A new window pops up where you can
define the specifics of the token and finally create it, see the image
below. Choose the scope "read" and click the green "SAVE" button.</p>
<p><img alt="analytics blog 5" src="../images/posts/archive/analytics-blog-five.png"></p>
<h2>Setting up Prometheus to receive metrics</h2>
<p>With the token in our hands, we can now configure Prometheus, adding the
node_exporters scrape config and the scrape for Ansible Tower's
metrics. Open the configuration of your Prometheus installation with an
editor of your choice: </p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>vim<span class="w"> </span>/etc/prometheus/prometheus.yml
</pre></div>

<p>Next, add the configuration for Ansible Tower and the operating system.
Below is an example:</p>
<div class="code"><pre class="code literal-block"><span class="c1">## Scrape Config - Tower</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">'tower'</span>
<span class="w">    </span><span class="nt">metrics_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/v2/metrics</span>
<span class="w">    </span><span class="nt">scrape_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
<span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https</span>
<span class="w">    </span><span class="nt">bearer_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xxxxxxxxxxxxxxxx (your bearer token)</span>
<span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tower.customer.com</span>

<span class="c1">## Add Node Exporter</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">'tower-01'</span>
<span class="w">    </span><span class="nt">scrape_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
<span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">'172.31.66.203:9100'</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">'tower-02'</span>
<span class="w">    </span><span class="nt">scrape_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
<span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">'172.31.65.135:9100'</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">'tower-db-01'</span>
<span class="w">    </span><span class="nt">scrape_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
<span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">'172.31.64.218:9100'</span><span class="p p-Indicator">]</span>
</pre></div>

<p>Note that the metrics for Ansible Tower are only collected once, while
the operating system metrics are collected for each server: Ansible
Tower helps ensure that all internal metrics are already collected and
shared among all installed servers of the cluster. But each operating
system on each server is independent and thus has independent OS
metrics.</p>
<p>Restart Prometheus to apply the changes:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>prometheus
</pre></div>

<p>Now, access the url http://prometheus.customer.com/targets to validate
that the data are scraped properly. Ensure that , all endpoints are in
UP status as shown below:</p>
<p><img alt="analytics blog 6" src="../images/posts/archive/analytics-blog-six.png"></p>
<h2>Grafana configuration to import the dashboards</h2>
<p>Now let's import the dashboards into Grafana. Grafana can be configured
through json files. In the repo mentioned above we provide two json
files to configure two dashboards: metric_servers.json for the OS
metrics, and metric_tower.json for the Ansible Tower metrics. Let's
import them into Grafana to enable the dashboards.</p>
<p>To do that, access your Grafana installation and click on the + sign in
the navigation menu on the left side. Pick <strong>"Folder"</strong>,  enter a
desired name and create it.</p>
<p>Afterwards we have the option to <strong>"Manage Dashboards"</strong>, from where we
can import the prepared json file via upload<strong>.</strong> Select the json file
metric_tower.json, choose the just created folder, change the uid and
choose the datasource as Prometheus as shown below:</p>
<p><img alt="analytics blog 7" src="../images/posts/archive/analytics-blog-seven.png"></p>
<p>Initiate the import by pressing the corresponding button. After the
import of metric_tower.json is finished, we repeat the same process for
the metric_servers.json file.</p>
<h2>The new Grafana dashboards</h2>
<p>Once both uploads are finished, we can view the imported dashboards:</p>
<p><img alt="analytics blog 8" src="../images/posts/archive/analytics-blog-eight.png"></p>
<p>In this Ansible Tower metrics dashboard, you can now see the following
information:</p>
<ul>
<li>Ansible Tower Version </li>
<li>Ansible Automation Platform Version</li>
<li>number of tower nodes</li>
<li>number of hosts available in the license</li>
<li>number of hosts used</li>
<li>total users</li>
<li>jobs successful</li>
<li>jobs failed</li>
<li>quantity by type of job execution</li>
<li>graphics showing the number of jobs running and pending jobs</li>
<li>graph showing the growth of the tool showing the amount of workflow,
    hosts, inventories, jobs, projects, organizations, etc.</li>
</ul>
<p>In the Operating System metrics dashboard, we have the following
information:</p>
<ul>
<li>Uptime</li>
<li>total vcpus</li>
<li>total memory</li>
<li>cpu iowait</li>
<li>memory consumption</li>
<li>cpu busy</li>
<li>Swap</li>
<li>filesystem consumption</li>
<li>disk iops</li>
<li>system load</li>
<li>used space graph</li>
<li>graphics with disk writing and reading, network traffic and network
    sockets.</li>
</ul>
<p><img alt="analytics blog 9" src="../images/posts/archive/analytics-blog-nine.png"></p>
<h2>Takeaways and where to go next</h2>
<p>In this post, we demonstrate how to create a monitoring of your Ansible
Tower environment using node_exporter to export metrics from the OS and
Prometheus collecting the metrics of the Ansible Tower api, we include
the OS consumption dashboards and Ansible Tower metrics, so that you
have a view more managerial of your environment, such as capacity,
licensing and jobs in execution, using graphics and counters, you can
identify problems and take actions quickly.</p>
<p>If you're interested in detailed views across your entire automation
environment, you can also try Automation Analytics on
<a href="https://cloud.redhat.com/">cloud.redhat.com</a>.</p>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="introducing-the-awx-collection/" class="u-url">Introducing the AWX and Ansible Tower Collections</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/bianca-henderson/">Bianca Henderson</a>
              </span>
            </p>
            <p class="dateline">
              <a href="introducing-the-awx-collection/" rel="bookmark">
                <time class="published dt-published" datetime="2020-05-04T00:00:00Z" itemprop="datePublished" title="2020-05-04 00:00">2020-05-04 00:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <h2>Introducing the AWX and Ansible Tower Collections</h2>
<p>Ansible Content Collections are a new way of distributing content,
including modules, for Ansible. </p>
<p>The AWX and Ansible Tower Collections allow Ansible Playbooks to
interact with AWX and Ansible Tower. Much like interacting with AWX or
Red Hat Ansible Tower via the web-based UI or the API, the modules
provided by the AWX Collection are another way to create, update or
delete objects as well as perform tasks such as run jobs, configure
Ansible Tower and more. This article will discuss new updates regarding
this collection, as well as an example playbook and details on how to
run it successfully.</p>
<p>The AWX Collection
<a href="https://galaxy.ansible.com/awx/awx">awx.awx</a> is the
upstream community distribution available on Ansible Galaxy.  The
downstream supported Ansible Collection
<a href="https://cloud.redhat.com/ansible/automation-hub/ansible/tower">ansible.tower</a>
is available on Automation Hub alongside the release of Ansible Tower 3.7.</p>
<p>This collection is a replacement for the
<a href="https://docs.ansible.com/ansible/latest/modules/list_of_web_infrastructure_modules.html#ansible-tower">Ansible Tower web modules</a>
which were previously housed and maintained directly in the
<a href="https://github.com/ansible/ansible/tree/stable-2.9/lib/ansible/modules/web_infrastructure/ansible_tower">Ansible repo</a>.
The modules were initially <a href="https://github.com/ansible/awx/pull/4701">added to the AWX source</a> in October of 2019,
when collections work began; the <code>tower_*</code> modules in Ansible Core were
<a href="https://github.com/ansible/ansible/pull/67233">marked for official migration</a>
shortly after. </p>
<h3>Improvements in the AWX Collection</h3>
<p>The modules delivered by Ansible Core and the initial versions of the
AWX Collection had a dependency on libraries provided by the
<a href="https://github.com/ansible/tower-cli">tower-cli</a> project.  Due to the
deprecation of tower-cli, there is work currently being done to remove
that dependency. This has led to a major update to the AWX Collection.</p>
<p>During the removal of tower-cli, we have tried to keep the modules
backwards-compatible with their corresponding version that shipped in
Ansible Core. This way, if you have already leveraged the <code>tower_*</code>
modules from Ansible Core, there should be very little work required
when switching to the AWX Collection. For more information, see the
<a href="https://docs.google.com/document/d/1HCPVLmLmNVX59MiAWlOAmnJUMKYfQed6pd64sr3tOLg/edit#heading=h.rfgzmyttyslb">Deprecation Updates</a>
section below.</p>
<p>In addition, we have standardized the modules' operational logic, thus
making the collections modules more uniform. Previously, each module was
written individually (sometimes by different authors). This caused
subtle differences of behavior for the individual modules. The modules
distributed in the AWX Collection follow a standard pattern, which
provides consistency even if written by different authors.</p>
<p>The syncing of the collection to the Red Hat Ansible Tower versions also
allows the modules' parameters to be kept in sync with the options
available within the web UI and API. As part of the recent changes, we
have added some new
<a href="https://github.com/ansible/awx/tree/devel/awx_collection/tools">tooling</a>
as well as updated many of the modules to now include parameters for
functionality which have been added to Ansible Tower since the modules
were initially released.</p>
<p>The collection now also provides better support for idempotency as well
as check_mode. In previous versions using check_mode, older modules
would simply ensure that they could connect to the Ansible Tower server
but not indicate if they would have actually made a change to an Ansible
Tower object. The AWX Collections modules will now more accurately
indicate if they would have changed a Tower object via check_mode. </p>
<h3>Using the AWX Collection</h3>
<p>It's very easy to get started with AWX Collection; all you need to do is
install the collection from <a href="https://galaxy.ansible.com/awx/awx">Ansible
Galaxy</a> in order to interact with
Ansible Tower. This can be done with the command:</p>
<div class="code"><pre class="code literal-block">ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>awx.awx
</pre></div>

<p>Once the collection is installed, we can begin writing playbooks to
manage your instance of Ansible Tower.</p>
<p><strong>Note:</strong> In order to communicate with your Red Hat Ansible Tower
environment, you need to have an instance of it running, with a
dedicated Ansible Tower host address.  </p>
<h4>Setting Up Authentication</h4>
<p>The first thing we need to do in order to interact with Red Hat Ansible
Tower is provide authentication. This can be done in several ways, all
of which are backwards-compatible with the old version of the modules.
The following authentication options are available for use:</p>
<ul>
<li>Specify the connection information as module parameters</li>
<li>Provide environment variables with the connection information</li>
<li>Reference an old tower_cli.cfg file that contains the connection
    information</li>
</ul>
<p>Below is an example of a tower_cli.cfg file:</p>
<div class="code"><pre class="code literal-block"><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">$HOST_ADDRESS</span><span class="p p-Indicator">]</span>
<span class="nt">verify_ssl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="nt">tower_username</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">$TOWER_USERNAME</span><span class="p p-Indicator">]</span>
<span class="nt">tower_password</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">$TOWER_PASSWORD</span><span class="p p-Indicator">]</span>
<span class="nt">oauth_token</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">$OAUTH_TOKEN</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">(if using oauth instead of a password)</span>
</pre></div>

<h4>Creating a Playbook</h4>
<p>Once you have the AWX Collection installed and your authentication
method decided upon, we can begin <a href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_intro.html">writing a
playbook</a>
to interact with Ansible Tower. In order to activate the collection, the
following code snippet is required at the play level of your playbook:</p>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="nt">collections</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">awx.awx</span>
</pre></div>

<p>Even if you are running on a version of Ansible that still ships with
the <code>tower_*</code> modules, this will cause Ansible to load the modules from
the AWXCollection instead of the versions shipped in Ansible Core. The
rest of your playbook would look identical to a playbook that did not
use the collection. </p>
<p>In the example playbook below, the authentication information is not
specified in the tasks and would be loaded either from the environment
variables or a <code>tower_cli.cfg</code> file:</p>
<div class="code"><pre class="code literal-block"><span class="nn">---</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Playbook for Using a Variety of Tower Modules</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span>
<span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">collections</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">awx.awx</span>

<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create a new organization</span>
<span class="w">    </span><span class="nt">tower_organization</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"New</span><span class="nv"> </span><span class="s">Org"</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">"test</span><span class="nv"> </span><span class="s">org"</span>
<span class="w">      </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create an Inventory</span>
<span class="w">    </span><span class="nt">tower_inventory</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"New</span><span class="nv"> </span><span class="s">Inventory"</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">"test</span><span class="nv"> </span><span class="s">inv"</span>
<span class="w">      </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="s">"New</span><span class="nv"> </span><span class="s">Org"</span>
<span class="w">      </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create a Host</span>
<span class="w">    </span><span class="nt">tower_host</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"New</span><span class="nv"> </span><span class="s">Host"</span>
<span class="w">      </span><span class="nt">inventory</span><span class="p">:</span><span class="w"> </span><span class="s">"New</span><span class="nv"> </span><span class="s">Inventory"</span>
<span class="w">      </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
<span class="w">      </span><span class="nt">variables</span><span class="p">:</span>
<span class="w">        </span><span class="nt">foo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create a Project</span>
<span class="w">    </span><span class="nt">tower_project</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"New</span><span class="nv"> </span><span class="s">Project"</span>
<span class="w">      </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="s">"New</span><span class="nv"> </span><span class="s">Org"</span>
<span class="w">      </span><span class="nt">scm_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">git</span>
<span class="w">      </span><span class="nt">scm_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/ansible/test-playbooks.git</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create a Team</span>
<span class="w">    </span><span class="nt">tower_team</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Test</span><span class="nv"> </span><span class="s">Team"</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">"test</span><span class="nv"> </span><span class="s">team"</span>
<span class="w">      </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="s">"New</span><span class="nv"> </span><span class="s">Org"</span>
<span class="w">      </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
<span class="w">      </span><span class="nt">validate_certs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create a Job Template</span>
<span class="w">    </span><span class="nt">tower_job_template</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Job</span><span class="nv"> </span><span class="s">Template</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Launch"</span>
<span class="w">      </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="s">"New</span><span class="nv"> </span><span class="s">Project"</span>
<span class="w">      </span><span class="nt">inventory</span><span class="p">:</span><span class="w"> </span><span class="s">"New</span><span class="nv"> </span><span class="s">Inventory"</span>
<span class="w">      </span><span class="nt">playbook</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug.yml</span>
<span class="w">      </span><span class="nt">ask_extra_vars</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Launch the Job Template (w/ extra_vars)!</span>
<span class="w">    </span><span class="nt">tower_job_launch</span><span class="p">:</span>
<span class="w">      </span><span class="nt">job_template</span><span class="p">:</span><span class="w"> </span><span class="s">"Job</span><span class="nv"> </span><span class="s">Template</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Launch"</span>
<span class="w">      </span><span class="nt">extra_vars</span><span class="p">:</span>
<span class="w">        </span><span class="nt">var1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">My First Variable</span>
<span class="w">        </span><span class="nt">var2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">My Second Variable</span>
<span class="w">        </span><span class="nt">var3</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">My Third Variable</span>
</pre></div>

<p><strong>Note:</strong> Another way to tell Ansible to use a module from a collection
is to fully qualify the modules' name with the collection namespace, as
in this example below:</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Launch the Job Template (w/ extra_vars)</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">awx.awx.tower_job_launch</span><span class="p p-Indicator">:</span>
<span class="w">      </span><span class="nt">job_template</span><span class="p">:</span><span class="w"> </span><span class="s">"Job</span><span class="nv"> </span><span class="s">Template</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Launch"</span>
<span class="w">      </span><span class="nt">extra_vars</span><span class="p">:</span>
<span class="w">        </span><span class="nt">var1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">My First Variable</span>
<span class="w">        </span><span class="nt">var2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">My Second Variable</span>
<span class="w">        </span><span class="nt">var3</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">My Third Variable</span>
</pre></div>

<h4>Executing the Playbook</h4>
<p>Assuming that the playbook above was saved in your current directory as
a file named configure_tower.yml, the following command would run this
playbook:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>ansible-playbook<span class="w"> </span>-i<span class="w"> </span>localhost<span class="w"> </span>configure_tower.yml
</pre></div>

<p><strong>Note:</strong> If you have issues with Python on your machine, changing the
ansible-playbook command to the following might help:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>ansible-playbook<span class="w"> </span>-i<span class="w"> </span>localhost<span class="w"> </span>-e<span class="w"> </span><span class="nv">ansible_python_interpreter</span><span class="o">=</span><span class="k">$(</span>which<span class="w"> </span>python<span class="k">)</span><span class="w"> </span>configure_tower.yml
</pre></div>

<p>With a properly-installed collection, configured authentication setup
and a correctly-formatted playbook, you should see output similar to
this:</p>
<p><img alt="ansible-blog-screenshot-awx-collection" src="../images/posts/archive/ansible-blog-screenshot-awx-collection.png"></p>
<p>Upon completion of the playbook, If you navigate to the web UI of your
Red Hat Ansible Tower server, you should be able to see that the
following objects were created:</p>
<ul>
<li>An organization called "New Org"</li>
<li>An inventory called "New Inventory" and host called "New Host" within that inventory</li>
<li>A project called "New Project"</li>
<li>A team called "New Team"</li>
<li>A job template called "Job Template to Launch"</li>
</ul>
<p>In addition, you can see on the Jobs page that the playbook invoked the
job template with the specified extra_vars.  See below:</p>
<p><img alt="bianca collections tower ui" src="../images/posts/archive/tower-ui-bianca-collections.png"></p>
<h3>Deprecation Updates</h3>
<p>During the removal of tower-cli, we attempted to keep the modules as
similar as possible to ease the transition from the old Core modules to
the new collection. Inevitably, some minor changes had to be made;
details of these changes can be found in the "Release and Upgrade"
section of the AWX Collections
<a href="https://github.com/ansible/awx/blob/devel/awx_collection/README.md#release-and-upgrade-notes">README.md</a>
file. Some changes to mention include:</p>
<ul>
<li>extra_vars parameters no longer support load of variables from a
    file by specifying a <code>@&lt;file name&gt;</code> notation. Instead, they now take
    dictionaries. If you were previously loading a file, please use the
    lookup plugin to load the file instead.</li>
<li>Some modules no longer return values the way they used to. All
    returns have been unified across the modules and primarily return
    the ID of the object modified.</li>
</ul>
<h3>Conclusion</h3>
<p>It is quite simple and straightforward to get up and running with the
AWX Collection.  Amongst other things, collections enable users to store
their most frequently-used tasks inside of different playbooks, which
can be easily shared as needed.  In a follow-up blog post, we will
discuss contribution and development, as well as how to test any new or
updated modules you may want to add to the collection.</p>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="ansible-linting-with-github-actions/" class="u-url">Ansible Linting with GitHub Actions</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/colin-mccarthy/">Colin McCarthy</a>
              </span>
            </p>
            <p class="dateline">
              <a href="ansible-linting-with-github-actions/" rel="bookmark">
                <time class="published dt-published" datetime="2020-04-30T00:00:00Z" itemprop="datePublished" title="2020-04-30 00:00">2020-04-30 00:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <h2>Ansible Linting with GitHub Actions</h2>
<h3>Want to trigger linting to your Ansible deployment on every Pull Request?</h3>
<p>In this blog, I will show you how to add some great automation into your
Ansible code pipeline. </p>
<p>CI/CD is currently a pretty hot topic for developers. Operations teams
can get started with some automated linting with GitHub actions. If you
use GitHub you can lint your playbooks during different stages including
git pushes or pull requests.</p>
<p>If you're following good git flow practices and have an approval
committee reviewing pull requests, this type of automated testing can
save you a lot of time and keep your Ansible code nice and clean.</p>
<h3>What is Ansible Lint?</h3>
<p>Ansible Lint is an open source project that lints your Ansible code. The
<a href="https://docs.ansible.com/ansible-lint/">docs</a> state that it checks
playbooks for practices and behavior that could potentially be improved.
It can be installed with pip and run manually on playbooks or set up in
a pre-commit hook and run when you attempt a commit on your repo from
the CLI.</p>
<p>The project can be found under the Ansible org on GitHub.</p>
<h3>What are GitHub Actions?</h3>
<p>From the GitHub <a href="https://help.github.com/en/actions">documentation</a>:
GitHub actions enable you to create custom workflows to automate your
project's software development life cycle processes. A workflow is a
configurable automated process made up of one or more jobs. You must
create a YAML file to define your workflow configuration. You can
configure your workflows to run when specific activity on GitHub
happens, at a scheduled time, or when an event outside of GitHub occurs.</p>
<p>An Ansible Lint action can be found on GitHub's Actions Marketplace.</p>
<h3>Example repo</h3>
<p>Let me show you an example of what this would look like. Here I have a
repo that has an Ansible Playbook.</p>
<p><a href="https://github.com/colin-mccarthy/ansible_lint_demo">https://github.com/colin-mccarthy/ansible_lint_demo</a></p>
<p>I attempted to submit a pull request to add a new playbook. The Ansible
Lint Action kicked off and eventually detected an issue and returned a
failed message.</p>
<h3>Why did it fail?</h3>
<p>I'm able to view the build logs under the Actions section of my repo. It
looks like I had some trailing white space and was comparing to an empty
string on one of my tasks.</p>
<p><img alt="image one" src="../images/posts/archive/colin-blog-201.png"></p>
<h3>Will I get an email notification?</h3>
<p>I received an email notification as well, letting me know it had failed.</p>
<p><img alt="image two" src="../images/posts/archive/colin-m-blog-202.png"></p>
<h3>Setting it up</h3>
<p>To use the action simply create an Ansible Lint.yml (or choose custom <code>*.yml</code> name) in the <code>.github/workflows/</code> directory.</p>
<p><img alt="image three" src="../images/posts/archive/colin-m-blog-203.png"></p>
<p>So here is the really cool part, you can run the action on various
events! This means every time someone submits a PR, or does a push, the
action will be triggered and a container will spin up and run Ansible
lint on your repo. You can define what events will trigger the action
using the <code>on: parameter</code>.</p>
<div class="code"><pre class="code literal-block"><span class="nt">on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">push</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">pull_request</span><span class="p p-Indicator">]</span>
</pre></div>

<h3>Pre-commit hooks</h3>
<p>I would like to go a little deeper into linting by bringing up
pre-commit hooks.</p>
<p>Pre-commit hooks are little scripts run locally on your machine that can
help identify issues before submission for code review. When talking
about the Ansible Lint action, it would really come in handy to lint the
code before you submit your pull request. This would make sure you
always pass. The GitHub action would just serve as the final step that
guards the shared repo. If you are using pre-commit hooks you should
hypothetically never fail the GitHub action test.</p>
<p>Example:</p>
<p><img alt="image four" src="../images/posts/archive/colin-m-blog-204.png"></p>
<p><a href="https://pre-commit.com/">https://pre-commit.com</a></p>
<p>To set this up on my MacBook I simply did a pip install.</p>
<div class="code"><pre class="code literal-block">pip<span class="w"> </span>install<span class="w"> </span>pre-commit
</pre></div>

<p>To set it up on your repo just make sure you...​</p>
<div class="code"><pre class="code literal-block">pre-commit<span class="w"> </span>install
</pre></div>

<p>To use Ansible Lint with <a href="https://pre-commit.com/">pre-commit</a>, just add
the following to your local repo's <code>.pre-commit-config.yaml</code> file. Make
sure to change <code>rev:</code> to be either a git commit sha or tag of Ansible Lint
containing <code>hooks.yaml</code>.</p>
<p><img alt="image five" src="../images/posts/archive/colin-m-blog-205.png"></p>
<h3>Markdown badge</h3>
<p>Once you set up your action, Github will give you a snippet of markdown
code you can add to the README.md displaying the linting status of your
repo. A badge for your repo to show if it is passing the linting test.</p>
<p><img alt="image six" src="../images/posts/archive/colin-m-blog-206.png"></p>
<p>After removing the trailing whitespace and fixing all issues my PR is
showing "All checks have passed" and my badge is showing passed.</p>
<p><img alt="image seven" src="../images/posts/archive/colin-m-blog-207.png"></p>
<p><img alt="image eight" src="../images/posts/archive/colin-m-blog-208.png"></p>
<h3>In conclusion</h3>
<p>Enforcing linting on code changes can build trust that your code is
following best practices. Hopefully, you can try and add some linting to
your Ansible repos with GitHub Actions or pre-commit hooks. Setting up
this action was a lot of fun and I especially like the badge that was
provided.</p>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="bullhorn-1/" class="u-url">Bullhorn #1</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/ansible-collaborative-et-al/">Ansible Collaborative, et al</a>
              </span>
            </p>
            <p class="dateline">
              <a href="bullhorn-1/" rel="bookmark">
                <time class="published dt-published" datetime="2020-04-23T15:00:00Z" itemprop="datePublished" title="2020-04-23 15:00">2020-04-23 15:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <p><img alt="Ansible Bullhorn banner" src="../images/bullhorn-banner-mango.png"></p>
<tr>
<td class="mcnTextContent" style='padding: 0px 18px 9px;font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;word-break: break-word;color: #202020;font-size: 16px;line-height: 150%;text-align: left;' valign="top">

                            <h2 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 26px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">The Bullhorn</h2>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'><em>A Newsletter for the Ansible Developer Community</em></p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>Welcome to <em>The Bullhorn</em>, our newsletter for the Ansible developer community. There are a lot of changes happening in Ansible right now, so we thought this would be a good time to start a newsletter to help everyone stay up-to-date.</p>
For now, we’ll probably release a new issue every couple of weeks or so. If you have any particular topics you’d like to see discussed in this newsletter, please reach out to us at gdk@redhat.com.

<h3 class="null" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 22px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">
<br>
AN UPDATE ON ANSIBLE 2.10</h3>
If you’ve been following the development of Ansible 2.10, you know that we’re splitting out much of the code from the ansible/ansible repository on GitHub into new collections. We discussed the rationale for this change in a couple of blog posts in July of 2019 [<a href="https://www.ansible.com/blog/thoughts-on-restructuring-the-ansible-project" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">1</a>] [<a href="https://www.ansible.com/blog/the-future-of-ansible-content-delivery" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">2</a>].<br><br><strong>For end users, nothing much should change</strong>. Ansible 2.10 will contain all of the modules and plug-ins that were present in Ansible 2.9, and playbooks written for Ansible 2.9 should generally work in Ansible 2.10. Users who “pip install ansible” should get the same experience. We expect to have a long beta cycle to help ensure compatibility between 2.9 and 2.10.<br><br>
Under the hood, though, there’s quite a bit going on for developers to be aware of: 
<ul>
<li dir="ltr" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;">
    <p dir="ltr" role="presentation" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'><em><strong>Content migration</strong></em>. In March, the Ansible Core development team froze the development tree for ansible/ansible and migrated most of the modules into one of the following repositories:</p>

    <ul>
<li style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;">
        <p dir="ltr" role="presentation" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>The community.general collection, which will be the new home for most community-written and community-supported content shipped in Ansible, built from a single community.general repository [<a href="https://github.com/ansible-collections/community.general" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">3</a>], and which will follow largely the same development process as Ansible has followed previously;</p>
        </li>
        <li style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;">
        <p dir="ltr" role="presentation" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>A set of more specific community collections, including: </p>

        <ul>
<li style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;">
            <p dir="ltr" role="presentation" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>The community.networking collection [<a href="https://github.com/ansible-collections/community.network" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">4</a>], which provides a broad array of community-written and community-supported networking modules;</p>
            </li>
            <li style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;">
            <p dir="ltr" role="presentation" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>The community.crypto collection [<a href="https://github.com/ansible-collections/community.crypto/" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">5</a>], a collection of related crypto modules with an active working group;</p>
            </li>
            <li style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;">
            <p dir="ltr" role="presentation" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>The community.grafana collection [<a href="https://github.com/ansible-collections/community.grafana" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">6</a>], a collection of modules to manage Grafana;</p>
            </li>
            <li style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;">
            <p dir="ltr" role="presentation" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>And various other collections that are managed by members of the Ansible community;</p>
            </li>
        </ul>
</li>
        <li style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;">
        <p dir="ltr" role="presentation" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>Partner collections, which are written, maintained, and supported by Ansible partners, a current list of which can be found here [<a href="https://access.redhat.com/articles/3642632" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">7</a>].</p>
        </li>
    </ul>
</li>
    <li dir="ltr" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;">
    <p dir="ltr" role="presentation" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'><em><strong>The new ansible-base project</strong></em>. Some modules remain in the ansible/ansible repository, which is now the home of the ansible-base project. Ansible-base is the core engine of Ansible itself, plus a small subset of key modules and libraries that are maintained by Red Hat. The ansible-base project is at the heart of everything Ansible does, and the Ansible team at Red Hat will keep a strong focus on maintaining it at a high level of quality and stability. As well as being packaged with Ansible, Ansible-base will now also release separately from Ansible, and will also ship with the Red Hat Ansible Automation Platform. Our current target date for release of ansible-base 2.10 is the end of July 2020. Follow our progress towards the release of ansible-base 2.10 here [<a href="https://github.com/ansible/ansible/blob/devel/docs/docsite/rst/roadmap/ROADMAP_2_10.rst" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">8</a>].</p>
    </li>
    <li dir="ltr" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;">
    <p dir="ltr" role="presentation" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'><em><strong>Ansible 2.10 build tooling</strong></em>. Because Ansible 2.10 will be composed from separate collections, we are working on build tools that will assemble those collections into a single pip deliverable. Initial versions of that build code can be found here [<a href="https://github.com/ansible-community/ansible-infra/tree/master/build_acd" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">9</a>], and we expect to be putting together our first alpha builds of Ansible 2.10 in the coming days. Look for an announcement here on <em>The Bullhorn</em>, on the Ansible developer mailing list, and elsewhere. </p>
    </li>
    <li role="presentation" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;">
<em><strong>GitHub redirection work</strong></em>. Now that much of the Ansible source code has moved, it might not always be clear to potential contributors where to submit issues or PRs. We will be working on workflow tools to direct contributors to the new content locations. We will also be working on tooling to make it easy for contributors to re-file existing PRs or issues in the new repositories. Follow the status of our GitHub redirection work here [<a href="https://github.com/ansible-collections/overview/blob/master/status.rst#moving-issues-and-prs-from-ansible-ansible" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">10</a>].</li>
</ul>
<p dir="ltr" role="presentation" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>We’re still quite early in this process, but we’ve made a lot of progress. Assuming things continue to go well, we should be on track for a release of Ansible 2.10 by AnsibleFest in October 2020, or perhaps earlier.</p>
Follow our progress towards the release of Ansible 2.10 here [<a href="https://github.com/orgs/ansible-collections/projects/1" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">11</a>] and here [<a href="https://github.com/ansible-collections/overview/blob/master/status.rst" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">12</a>].<br>
 
<h3 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 22px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">ANSIBLE CONTRIBUTOR SUMMIT<span style="font-size:13px"> </span>
</h3>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>On March 29th, we held our first fully virtual Ansible Contributor Summit. The event was originally scheduled to be an in-person event co-located with FOSS North in Gothenburg, Sweden, but COVID-19 changed our plans.  </p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>Despite our inability to meet in person, the Contributor Summit was a productive and successful event, with almost 50 contributors joining us over the course of the day. You can check out the videos [<a href="https://www.youtube.com/playlist?list=PL0FmYCf7ocraJzcnE3-VwVozQ0Zt7vm7z" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">13</a>] of the livestream event, along with a detailed summary [<a href="https://meetbot.fedoraproject.org/ansible-community/2020-03-29/ansible_contributor_summit_2020.2020-03-29-10.50.html" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">14</a>] and a full log [<a href="https://meetbot.fedoraproject.org/ansible-community/2020-03-29/ansible_contributor_summit_2020.2020-03-29-10.50.log.html" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">15</a>] of the accompanying IRC session. </p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>On March 30th, we followed the contributor summit with a virtual hackathon, in which we followed up on many of the issues that were discussed. Both a summary [<a href="https://meetbot.fedoraproject.org/ansible-community/2020-03-30/contributors_summit_hackathon.2020-03-30-09.02.html" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">16</a>] and a full log [<a href="https://meetbot.fedoraproject.org/ansible-community/2020-03-30/contributors_summit_hackathon.2020-03-30-09.02.log.html" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">17</a>] are available for the hackathon as well. </p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>In the future, we expect to have these virtual contributor summit events roughly once a quarter, which means the next event should happen near the end of June 2020. We will rotate the start times of these sessions to make them more accessible to people spread across the globe. <br>
 </p>

<h3 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 22px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">COMMUNITY METRIC HIGHLIGHT: COLLECTIONS GROWTH<span style="font-size:13px"> </span>
</h3>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>As the Ansible community continues to grow, we rely increasingly on metrics to keep track of our progress towards our goals.  </p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>One of our key areas of focus is on contributors to collections. As we make the shift to collections, we want to ensure that our contributors are successful in making the switch. We’ve got a dashboard that shows us the progress of each collection in regaining its momentum from its original development in ansible/ansible. Here’s a small sample of that dashboard: </p>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'><img src="https://lh3.googleusercontent.com/Izs8yviPW1ZLYYVlzbspiaKQrHGwhh4TKM61YowjSzNalFx2FI-b1cXEzCEyA67n_AiHFepD--RkSNuivfoLErHL_DTWvhX8v_oAkvr5d4lKOu7rPpw3UeP01-n7ykH9qJZUNQ58" style="border: 0;height: auto !important;outline: none;text-decoration: none;-ms-interpolation-mode: bicubic;" width="624" height="341"></p>
You can see the full dashboard here [<a href="https://stats.eng.ansible.com/apps/collections/contributors/" style="mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #007C89;font-weight: normal;text-decoration: underline;">18</a>]. 

<h3 class="null" dir="ltr" style="display: block;margin: 0;padding: 0;color: #202020;font-family: Helvetica;font-size: 22px;font-style: normal;font-weight: bold;line-height: 125%;letter-spacing: normal;text-align: left;">
<br>
FEEDBACK<span style="font-size:13px"> </span>
</h3>

<p dir="ltr" style='font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;margin: 10px 0;padding: 0;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;color: #202020;font-size: 16px;line-height: 150%;text-align: left;'>Have any questions you’d like to ask, or issues you’d like to see covered? Please send us an email to gdk@redhat.com.<br><br>
If you know somebody who could benefit from reading this newsletter, please feel free to forward it to them.</p>

                        </td>
                    </tr>
</div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="getting-started-with-ansible-and-check-point/" class="u-url">Getting started with Ansible and Check Point</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/sumit-jaiswal/">Sumit Jaiswal</a>
              </span>
            </p>
            <p class="dateline">
              <a href="getting-started-with-ansible-and-check-point/" rel="bookmark">
                <time class="published dt-published" datetime="2020-04-13T00:00:00Z" itemprop="datePublished" title="2020-04-13 00:00">2020-04-13 00:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <h2>Getting started with Ansible and Check Point</h2>
<p>The scale and complexity of modern infrastructures require not only that
you be able to define a security policy for your systems, but also be
able to apply that security policy programmatically or make changes as a
response to external events.  As such, the proper automation tooling is
a necessary building block to allow you to apply the appropriate actions
in a fast, simple and consistent manner.</p>
<p><a href="https://cloud.redhat.com/ansible/automation-hub/check_point/mgmt">Check Point has a certified Ansible Content Collection of modules</a>
to help enable organizations to automate their response and remediation
practices, and to embrace the DevOps model to accelerate application
deployment with operational efficiency. The modules, based on Check
Point security management APIs are also available on Ansible Galaxy,
in the upstream version of
<a href="https://galaxy.ansible.com/check_point/mgmt">Check Point Collection for the Management Server</a>. </p>
<p>The operational flow is exactly the same for the API as it is for the
Check Point security management GUI SmartConsole, <em>i.e.</em> Login &gt; Get
Session &gt; Do changes &gt; Publish &gt; Logout. </p>
<p>Security professionals can leverage these modules to automate various
tasks for the identification, search, and response to security events. 
Additionally, in combination with other modules that are part of
Ansible security automation,
existing Check Point infrastructures can be integrated in orchestrated
processes involving multiple security technologies.  </p>
<p>DevOps professionals can consume the same modules in automated workflows
to support the deployment and maintenance of both physical and
virtualized next-generation firewalls.</p>
<p>To better understand how these new modules can be consumed, I'll provide
a series of examples based on the code in the security automation
community project, under the <strong>Ansible security automation</strong>
<a href="https://github.com/ansible-security/ansible-security-playbooks/tree/master/playbooks/checkpoint">Sample Plays GH repo</a>. 
The pre-requisite for the integrations to work and function as expected
is that Check Point R80 versions are supported by this integration given
this
<a href="https://supportcenter.checkpoint.com/supportcenter/portal?eventSubmit_doGoviewsolutiondetails=&amp;solutionid=sk114661">hotfix</a>
is applied.</p>
<h3>Ansible Check Point Modules</h3>
<p><code>cp_mgmt_*</code> modules have been released with Ansible 2.9. They can be
currently found in the '<em>latest</em>' branch of the
<a href="https://docs.ansible.com/ansible/latest/modules/list_of_network_modules.html#check-point">documentation</a>.</p>
<p>There are quite a few modules available to manage the Check Point
appliance, in the Check Point Mgmt Collection they are structured in two
categories:</p>
<ul>
<li>
<code>cp_mgmt_*</code>: All these modules use the aforementioned API to <strong>post</strong> API objects on the Check Point appliance.</li>
<li>
<code>cp_mgmt_*_facts</code>: All the facts modules use the same API to get facts from the Check Point appliance.</li>
</ul>
<p>As an example, if we look at the modules dedicated to <em>host objects</em>
this is reflected in the following way:</p>
<ul>
<li>
<a href="https://docs.ansible.com/ansible/latest/modules/cp_mgmt_host_module.html">cp_mgmt_host</a> - Manages host objects on Check Point devices including creating, updating and removing objects.</li>
<li>
<a href="https://docs.ansible.com/ansible/latest/modules/cp_mgmt_host_facts_module.html">cp_mgmt_host_facts</a> - Gets host objects facts on Check Point devices.</li>
</ul>
<p>There are also a total of nine
<a href="https://docs.ansible.com/ansible/2.8/modules/list_of_network_modules.html#checkpoint">checkpoint_*</a>
modules which were introduced with
<strong>Ansible</strong> <strong>2.8</strong>, but these
modules are deprecated and it's encouraged and advisable to use the
latest <code>cp_mgmt_*</code> modules
that were introduced in
<strong>Ansible 2.9</strong> unless required.</p>
<h3>cp_mgmt_* modules example: How to perform host configuration</h3>
<p>Here is an example of how to use the  <strong>cp_mgmt_host</strong> module to
configure a <strong>host</strong>:</p>
<div class="code"><pre class="code literal-block"><span class="nn">---</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">check_point</span>
<span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">httpapi</span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create host object</span>
<span class="w">      </span><span class="nt">cp_mgmt_host</span><span class="p">:</span>
<span class="w">        </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dark green</span>
<span class="w">        </span><span class="nt">ipv4_address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.0.2.2</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">New CP_MGMT Host 1</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
<span class="w">        </span><span class="nt">auto_publish_session</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>

<p>When the module argument <strong>auto_publish_session</strong> is set to <em>True</em>, you
will  make Ansible run to take effect on your Check Point appliance
immediately.  You'll then have to <strong>publish</strong> the changes, and that's
what <strong>auto_publish_session</strong> achieves.  Note that by default, the value
of <strong>auto_publish_session</strong> is <strong>False</strong>. This module argument is
available if the user wants to publish the changes at <strong>task</strong> level.</p>
<p>However, if we want to publish the changes at the very end of the play
run, after running <strong>"n"</strong> number of tasks, we can just run the
available <strong>cp_mgmt_publish</strong> module at the end of the play, and all
changes done will take effect on your Check Point appliance.</p>
<p>To run the playbook use the ansible-playbook command:</p>
<p><img alt="Checkpoint blog one" src="../images/posts/archive/checkpoint-blog-one.png"></p>
<p>To check if this has effectively changed the Check Point configuration
as expected, login to the Check Point SmartConsole and look under
<strong>Network objects -&gt; Hosts</strong> where we will see the new host listed:</p>
<p><img alt="checkpoint blog two" src="../images/posts/archive/checkpoint-blog-two.png"></p>
<p>The modules can keep state (where applicable) so when we re-run the
playbook instead of \"<strong>changed\"</strong> it will just say <strong>OK</strong> without
performing any changes to the Check Point appliance. This is also
referred to as <strong><em>idempotency</em></strong> (also see the <a href="http://docs.ansible.com/ansible/latest/glossary.html">Ansible
Docs</a>).</p>
<p><img alt="checkpoint blog three" src="../images/posts/archive/checkpoint-blog-three.png"></p>
<h3>Example: How to collect hosts facts</h3>
<p>Check Point <strong>facts</strong> modules allow us to query different Check Point
objects, such as network, address, dns domain, host records, and more.</p>
<p>Let's look at an Ansible Playbook snippet focused on grabbing
information about an <strong>host</strong> configured via the previous example
playbook:</p>
<div class="code"><pre class="code literal-block"><span class="x">---</span>
<span class="x">- hosts: check_point</span>
<span class="x">  connection: httpapi</span>
<span class="x">  tasks:</span>
<span class="x">    - name: collect-host facts</span>
<span class="x">      cp_mgmt_host_facts:</span>
<span class="x">        name: New CP_MGMT Host 1</span>
<span class="x">      register: cp_host</span>
<span class="x">    - name: display host facts</span>
<span class="x">      debug:</span>
<span class="x">        msg: "</span><span class="cp">{{</span> <span class="nv">cp_host</span> <span class="cp">}}</span><span class="x">"</span>
</pre></div>

<p>Run the playbook with the ansible-playbook command as:</p>
<p><img alt="checkpoint blog four" src="../images/posts/archive/checkpoint-blog-four.jpg"></p>
<p>Play output: All of the host facts related to queried host name <em>i.e.</em> <strong>"New CP_MGMT Host 1"</strong></p>
<p>The above playbook shows how we can query Check Point to collect
specific information about objects (in this case, hosts). These facts
can be then used through an Ansible play and allow an appliance, or a
group of appliances, to act as a single source of truth for information
that may be changing. To read more about Ansible variables, facts and
the set_fact module, refer to the <a href="http://docs.ansible.com/ansible/latest/playbooks_variables.html">Ansible variables
documentation</a>.</p>
<h3>How to use Check Point modules in response and remediation scenarios</h3>
<p>Ansible security automation supports interoperability between the many security technologies used by SOCs or security teams as part of their response and remediation activities. </p>
<p>To help security professionals adopt Ansible as the common automation
language for security, we have written a number of roles that can be
immediately consumed to accelerate productivity in these scenarios.</p>
<p>An example of these roles is
<a href="https://github.com/ansible-security/acl_manager">acl_manager</a>, which
can be used to automate tasks such as blocking and unblocking IP and
URLs on supported technologies, like Check Point NGFW. </p>
<h4>How to Block an IP in Check Point using the acl_manager role</h4>
<div class="code"><pre class="code literal-block"><span class="o">---</span>
<span class="o">-</span><span class="w"> </span><span class="n">hosts</span><span class="p">:</span><span class="w"> </span><span class="n">checkpoint</span>
<span class="w">  </span><span class="n">connection</span><span class="p">:</span><span class="w"> </span><span class="n">httpapi</span>
<span class="w">  </span><span class="n">tasks</span><span class="p">:</span><span class="w"> </span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">include_role</span><span class="p">:</span>
<span class="w">       </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">acl_manager</span>
<span class="w">       </span><span class="n">tasks_from</span><span class="p">:</span><span class="w"> </span><span class="n">blacklist_ip</span>
<span class="w">     </span><span class="n">vars</span><span class="p">:</span>
<span class="w">       </span><span class="n">source_ip</span><span class="p">:</span><span class="w"> </span><span class="mf">192.0</span><span class="o">.</span><span class="mf">2.2</span>
<span class="w">       </span><span class="n">destination_ip</span><span class="p">:</span><span class="w"> </span><span class="mf">192.0</span><span class="o">.</span><span class="mf">2.12</span>
<span class="w">       </span><span class="n">ansible_network_os</span><span class="p">:</span><span class="w"> </span><span class="n">checkpoint</span>
</pre></div>

<p>Roles can be used to abstract common security tasks to seamlessly
support specific use cases without getting into underlying module
functionalities.</p>
<p>The Check Point management API and other Check Point APIs are defined
in the <a href="https://sc1.checkpoint.com/documents/latest/api_reference/index.html">Check Point API Reference</a>.</p>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="migrating-existing-content-into-a-dedicated-ansible-collection/" class="u-url">Migrating existing content into a dedicated Ansible collection</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/xlab-steampunk/">XLAB Steampunk</a>
              </span>
            </p>
            <p class="dateline">
              <a href="migrating-existing-content-into-a-dedicated-ansible-collection/" rel="bookmark">
                <time class="published dt-published" datetime="2020-04-08T00:00:00Z" itemprop="datePublished" title="2020-04-08 00:00">2020-04-08 00:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <h2>Migrating existing content into a dedicated Ansible collection</h2>
<p>Today, we will demonstrate how to migrate part of the existing Ansible
content (modules and plugins) into a dedicated Ansible Collection. We
will be using modules for managing DigitalOcean's resources as an
example so you can follow along and test your development setup. But
first, let us get the big question out of the way: Why would we want to
do that? </p>
<h3>Ansible on a Diet</h3>
<p>In late March 2020, Ansible's main development branch lost almost all
of its modules and plugins. Where did they go? Many of them moved to the
<a href="https://github.com/ansible-collections">ansible-collections GitHub organization</a>.
More specifically, the vast majority landed in the
<a href="https://github.com/ansible-collections/community.general">community.general</a>
GitHub repository that serves as their temporary home (refer to the
<a href="https://github.com/ansible-collections/overview">Community overview README</a>
for more information). </p>
<p>The ultimate goal is to get as much content in the community.general
Ansible Collection "adopted" by a caring team of developers and moved
into a dedicated upstream location, with a dedicated <a href="https://galaxy.ansible.com/docs/contributing/namespaces.html">Galaxy namespace</a>.
Maintainers of the newly migrated Ansible Collection can then set up the
development and release processes as they see fit, (almost) free from
the requirements of the comunity.general collection. For more
information about the future of Ansible content delivery, please refer
to <a href="https://www.ansible.com/blog/the-future-of-ansible-content-delivery">an official blog post</a>,
a <a href="https://steampunk.si/posts/the-galactic-future-of-ansible-content/">Steampunk perspective</a>,
as well as an <a href="https://www.ansible.com/how-to-build-ansible-collections-experience-from-community-members">AnsibleFest talk</a>
about Ansible Collections. </p>
<p>Without any further ado, let us get our hands dirty by creating a brand
new DigitalOcean Ansible Collection.</p>
<h3>The Migration Process</h3>
<p>There are three main reasons why we selected DigitalOcean-related
content for migration:</p>
<ol>
<li>It contains just enough material that it is not entirely trivial to
    migrate (we will need to use some homemade tools during the
    migration process).</li>
<li>DigitalOcean modules use standard features like documentation
    fragments and utility Python packages, which means that merely
    copying the modules over will not be enough.</li>
<li>It is currently part of the community.general Ansible Collection.</li>
</ol>
<p><strong>Edit (2020-09-23):</strong> The DigitalOcean modules were moved to the
<code>community.digitalocean</code> collection in July 2020, so the last
point from the list above does not hold anymore. But I guess the move
confirmed that our selection of an example was correct</p>
<p>So it should not come as a surprise that content migration is a
multi-step process. We need to create a working directory, clone the
community.general Ansible Collection into it, and create an empty
destination collection. But before we can do any of that, we must decide
on the name of this new Ansible Collection.</p>
<p>It is a well known fact that there are only two hard things in Computer
Science: cache invalidation, naming things, and off-by-one errors ;)
Fortunately, in our case, finding a proper name is relatively simple:
because we are moving all modules for working with DigitalOcean's cloud
platform, we will name it <em>digital_ocean.digital_ocean</em>.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/work/ansible_collections
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/work/ansible_collections
$<span class="w"> </span>mkdir<span class="w"> </span>community
$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>--depth<span class="w"> </span><span class="m">1</span><span class="w"> </span>--branch<span class="w"> </span><span class="m">0</span>.2.0<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>https://github.com/ansible-collections/community.general.git<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>community/general
$<span class="w"> </span>ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>init<span class="w"> </span>digital_ocean.digital_ocean
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>digital_ocean/digital_ocean
</pre></div>

<p>With the directories in place, we can start copying the content over
into our new Ansible Collection. But instead of just moving the modules
over, we will also take the opportunity to rename the modules. </p>
<p>DigitalOcean-related module names all have the <em>digital_ocean_</em> prefix
because up until Ansible 2.8, all modules lived in the same global
namespace. Now that we are moving them into a separate namespace, we can
safely drop that prefix. We could do that manually, but writing a few
lines of Bash will be faster and more intellectually satisfying: </p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nv">source</span><span class="o">=</span>../../community/general
$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>plugins/modules
$<span class="w"> </span><span class="k">for</span><span class="w"> </span>m<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>find<span class="w"> </span><span class="nv">$source</span>/plugins/modules/<span class="w"> </span>-name<span class="w"> </span><span class="s1">'digital_ocean_*.py'</span><span class="w"> </span>-type<span class="w"> </span>f<span class="k">)</span>
&gt;<span class="w"> </span><span class="k">do</span>
&gt;<span class="w">   </span><span class="nv">new_name</span><span class="o">=</span><span class="k">$(</span>basename<span class="w"> </span><span class="nv">$m</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">'s/digital_ocean_//'</span><span class="k">)</span>
&gt;<span class="w">   </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"  Copying </span><span class="k">$(</span>basename<span class="w"> </span><span class="nv">$m</span><span class="k">)</span><span class="s2"> -&gt; </span><span class="nv">$new_name</span><span class="s2">"</span>
&gt;<span class="w">   </span>cp<span class="w"> </span><span class="nv">$m</span><span class="w"> </span>plugins/modules/<span class="nv">$new_name</span>
&gt;<span class="w"> </span><span class="k">done</span>
</pre></div>

<p>Next, we need to copy over utility Python files that our modules use. We
can get a list of all such modules by searching for the <em>module_utils</em>
imports:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>grep<span class="w"> </span>-h<span class="w"> </span><span class="s2">"ansible_collections.community.general.plugins.module_utils."</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>plugins/modules/*.py<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq
</pre></div>

<p>We need to move a single Python file over and then fix the import
statements, which is easy enough to automate:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>mkdir<span class="w"> </span>plugins/module_utils
$<span class="w"> </span>cp<span class="w"> </span>../../community/general/plugins/module_utils/digital_ocean.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>plugins/module_utils/
$<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span>-e<span class="w"> </span><span class="s1">'s/ansible_collections.community.general.plugins/./'</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>plugins/modules/*.py
</pre></div>

<p>The last thing that we need to fix is the documentation. Because we
renamed the modules during the move, we need to drop the
<em>digital_ocean_</em> prefix from the module: <code>digital_ocean_${module_name}</code>
part of the <code>DOCUMENTATION</code> block. We also need to adjust the EXAMPLES
section and replace the old module names with fully qualified ones. sed
time again:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span>-r<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s1">'s/module: +digital_ocean_([^ ]+)/module: 1/'</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="s1">'s/digital_ocean_([^ ]+):/digital_ocean.digital_ocean.1:/'</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>plugins/modules/*.py
</pre></div>

<p>We also need to copy over any documentation fragments that our modules
use. We can identify them by searching for the <em>community.general.</em>
string in our modules: </p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>grep<span class="w"> </span>-h<span class="w"> </span>--<span class="w"> </span><span class="s2">"- community.general."</span><span class="w"> </span>plugins/modules/*.py<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq
</pre></div>

<p>Now, we must repeat the steps we did with the utility files: copy the
documentation fragment files over and update the references. Again,
because our fragment now lives in its own dedicated namespace, we can
rename it into something more meaningful. Since our documentation
fragment contains definitions of common parameters, we will call it
<em>common</em>. And we promise that this is the last fix that we do using sed
and regular expressions. ;)</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>mkdir<span class="w"> </span>plugins/doc_fragments
$<span class="w"> </span>cp<span class="w"> </span>../../community/general/plugins/doc_fragments/digital_ocean.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>plugins/doc_fragments/common.py
$<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span>-e<span class="w"> </span><span class="s1">'s/community.general.digital_ocean.documentation/digital_ocean.digital_ocean.common/'</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>plugins/modules/*.py
</pre></div>

<p>And we are done. Time to pat ourselves on the back and commit the work:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>init<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>.<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">"Initial commit"</span>
</pre></div>

<p>If you are only interested in the final result of this migration, you
can download it from the
<a href="https://github.com/xlab-si/digital_ocean.digital_ocean">digital_ocean.digital_ocean</a>
GitHub repo. </p>
<h3>Taking Our New Collection for a Ride</h3>
<p>If we want to test our newly created DigitalOcean Ansible Collection, we
need to tell Ansible where it should search for it. We can do that by
settings the <em>ANSIBLE_COLLECTIONS_PATHS</em> environment variable to point
to our work directory. How will we know if things work? We will kindly
ask Ansible to print the module documentation for us. </p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">ANSIBLE_COLLECTIONS_PATHS</span><span class="o">=</span>~/work
$<span class="w"> </span>ansible-doc<span class="w"> </span>digital_ocean.digital_ocean.domain
</pre></div>

<p>If all went according to plans, the last command brought up the
documentation for the domain module. Note that we used the domain
module's fully-qualified collection name (FQCN) in the last command. If
we leave out the namespace and collection name parts, Ansible will not
be able to find our module.</p>
<p>And as the ultimate test, we can also run a simple playbook like this one:</p>
<div class="code"><pre class="code literal-block"><span class="nn">---</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DigitalOcean test playbook</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span>
<span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create a new droplet</span>
<span class="w">      </span><span class="nt">digital_ocean.digital_ocean.droplet</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mydroplet</span>
<span class="w">        </span><span class="nt">oauth_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OAUTH_TOKEN</span>
<span class="w">        </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2gb</span>
<span class="w">        </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sfo1</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">centos-8-x64</span>
<span class="w">        </span><span class="nt">wait_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span>
</pre></div>

<p>When we execute the ansible-playbook play.yaml command, Ansible will
yell at us because we provided an invalid authentication token. But we
should not be sad because the error message proves that our module is
working as expected. </p>
<h3>Where to Go from Here</h3>
<p>In today's post, we demonstrated what the initial steps of content
migration are. But the list does not end here. If we were serious about
maintaining Ansible Collections such as this, we would need to add tests
for our modules and set up the CI/CD integration. </p>
<p>Another thing that we left out of this post is how to push the newly
created Ansible Collection to Ansible Galaxy. We did this not because
publishing a collection is particularly hard, but because it is almost
too easy. All one has to do is get hold of the digital_ocean namespace
and then run the next two commands:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>build
$<span class="w"> </span>ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>publish<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--api-key<span class="w"> </span><span class="o">{</span>galaxy<span class="w"> </span>API<span class="w"> </span>key<span class="w"> </span>here<span class="o">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>digital_ocean-digital_ocean-1.0.0.tar.gz
</pre></div>

<p>Publishing a collection that we do not intend to maintain would be a
disservice to the Ansible community. Quality over quantity.</p>
<p>If you need help with migrating existing content into a dedicated
Ansible Collection and maintaining it on the long run,
<a href="https://steampunk.si/#contact-us">contact our experts</a>
and they will gladly help you out.</p>
<p>Cheers! </p>
          </div>
      </article><br><hr>
<br><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title">
            <a href="hands-on-with-ansible-collections/" class="u-url">Hands on with Ansible collections</a>
          </h1>
          <div class="metadata">
            <p class="byline author vcard">
              <span class="byline-name fn" itemprop="author">
                  <a href="../authors/ajay-chenampara/">Ajay Chenampara</a>
              </span>
            </p>
            <p class="dateline">
              <a href="hands-on-with-ansible-collections/" rel="bookmark">
                <time class="published dt-published" datetime="2020-03-24T00:00:00Z" itemprop="datePublished" title="2020-03-24 00:00">2020-03-24 00:00</time></a>
            </p>
          </div>
        </header><div class="p-summary entry-summary">
            <h2>Hands on with Ansible collections</h2>
<p>Ansible collections have been introduced previously through two of our
blogs "Getting Started with Ansible Content Collections"
and "The Future of Ansible Content Delivery".
In essence, Ansible Automation content is going to be delivered using
the collection packaging mechanism.  Ansible Content refers to Ansible
Playbooks, modules, module utilities and plugins. Basically all the
Ansible tools that users use to create their Ansible Automation. Content
is divided between two repositories:</p>
<ol>
<li>Ansible Galaxy
    (<a href="https://galaxy.ansible.com/">https://galaxy.ansible.com</a>)</li>
<li>Automation Hub (<a href="https://cloud.redhat.com/ansible/automation-hub">https://cloud.redhat.com/ansible/automation-hub</a>)</li>
</ol>
<p>Ansible Galaxy is the upstream community for sharing Ansible
Collections.  Any community user can create a namespace and share
content with anyone. Access to Automation Hub is included with a Red Hat
Ansible Automation Platform subscription.  Automation Hub only contains
fully supported and certified content from Red Hat and our partners.
This makes it easier for Red Hat customers to determine which content is
the official certified, and importantly supported, content.  This
includes full content from partners such as Arista, Cisco, Checkpoint,
F5, IBM, Microsoft and NetApp. </p>
<p>In this blog post we\'ll walk through a use case wherein, the user would
like to use a Red Hat certified collection from Automation Hub and also
use a community supported collection from Ansible Galaxy.</p>
<p>There are different ways to interact with Ansible Collections and your
Ansible Automation:</p>
<ol>
<li>Install into your runtime environment or virtual env</li>
<li>Provide as part of your SCM tree</li>
<li>Using a requirements file</li>
</ol>
<p>Regardless of the method chosen, first you need to find, identity and
obtain the Ansible Collections you want to use.</p>
<h3>Ansible Playbook repo structure:</h3>
<p>Here is my setup for this demonstration of Ansible Collections:</p>
<p><img alt="Ajay blog one" src="../images/posts/archive/ajay-blog-one.png"></p>
<ul>
<li>ansible.cfg is the Ansible configuration file.  I will elaborate on
    this in the next section.</li>
<li>collections is a directory storing all Ansible Collections that my
    Ansible Playbook will use</li>
<li>inventory is a directory containing a inventory file named hosts</li>
<li>play.yaml is my Ansible Playbook</li>
</ul>
<p>For my example this is a development environment where I just want to
download the latest and greatest.  I will use a gitignore file to ignore
the downloaded content and only track the requirements file.</p>
<p><img alt="Ajay blog two" src="../images/posts/archive/ajay-blog-two.png"></p>
<p>This gitignore file helps ensure that your playbook repository content
in the version control system only tracks your playbook and related
files.  If you want to track Ansible Collections being used in your SCM
just remove the Git ignore (e.g. the <strong>2- Provide as part of your SCM
tree</strong> in the introduction).  For a more in-depth look into using
collections and the folder structure please refer to the
<a href="https://docs.ansible.com/ansible/latest/user_guide/collections_using.html#using-collections">documentation</a>.</p>
<h3>Configuring access to Automation Hub and Galaxy</h3>
<p>For accessing certified content from the Automation Hub, you will need
to first get the token for authentication. Do this by logging into
<a href="https://cloud.redhat.com/">https://cloud.redhat.com</a> and then
navigating to <a href="https://cloud.redhat.com/ansible/automation-hub/token">https://cloud.redhat.com/ansible/automation-hub/token</a> </p>
<p><img alt="Ajay blog three" src="../images/posts/archive/ajay-blog-three.png"></p>
<p>Clicking on the <code>Load token</code> button will reveal your
authentication token. Save this information somewhere, we will need to
enter this into the ansible.cfg file. Ansible Galaxy also has an API
token used for authentication and can be accessed by navigating to
<a href="https://galaxy.ansible.com/me/preferences">https://galaxy.ansible.com/me/preferences</a> after logging in.</p>
<p><img alt="Ajay blog five" src="../images/posts/archive/ajay-blog-five.png"></p>
<p>Click on the <code>Show API key</code> button to reveal your API key.</p>
<h3>Configuring your Ansible.cfg</h3>
<p>We define the Galaxy servers under the <strong>[galaxy]</strong> section of the
Ansible configuration file (i.e. *ansible.cfg). * An Ansible
configuration file is an ini formatted file for configuring behavior
settings.  This includes settings such as changing the return output
from JSON to YAML. If you are unfamiliar with an Ansible configuration
file please refer to the
<a href="https://docs.ansible.com/ansible/latest/installation_guide/intro_configuration.html">documentation</a>. 
As a reminder the Ansible configuration file is searched in the
following order:\</p>
<ol>
<li>ansible.cfg (in the current directory)</li>
<li>\~/.ansible.cfg (in the current home directory)</li>
<li>/etc/ansible/ansible.cfg </li>
</ol>
<p>These tokens should be added now to the ansible.cfg file. An example of
this is shown below.  It is recommended when using more than one Galaxy
server to list them in server_list. The list should be in precedence
order with your primary location choice first, in this case Automation
Hub.</p>
<div class="code"><pre class="code literal-block"><span class="p p-Indicator">[</span><span class="nv">defaults</span><span class="p p-Indicator">]</span>
<span class="l l-Scalar l-Scalar-Plain">stdout_callback = yaml</span>
<span class="l l-Scalar l-Scalar-Plain">inventory = inventory/hosts</span>
<span class="l l-Scalar l-Scalar-Plain">collections_paths = ./collections</span>

<span class="l l-Scalar l-Scalar-Plain">[galaxy]</span>

<span class="l l-Scalar l-Scalar-Plain">server_list = automation_hub, release_galaxy</span>

<span class="l l-Scalar l-Scalar-Plain">[galaxy_server.automation_hub]</span>
<span class="l l-Scalar l-Scalar-Plain">url=https://cloud.redhat.com/api/automation-hub/</span>
<span class="l l-Scalar l-Scalar-Plain">auth_url=https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token</span>
<span class="l l-Scalar l-Scalar-Plain">token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>

<span class="l l-Scalar l-Scalar-Plain">[galaxy_server.release_galaxy]</span>
<span class="l l-Scalar l-Scalar-Plain">url=https://galaxy.ansible.com/</span>
<span class="l l-Scalar l-Scalar-Plain">token=xxxxxxxxxxxxxxxxxxxxxx</span>
</pre></div>

<p>Note the <em>url</em> and <em>auth_url</em> keys that define the Automation Hub
repository and authentication endpoint. Also note that this file defines
where the collections should be downloaded to via the collections_paths
parameter (e.g.. ./collections).  For more information on configuration
for Ansible Galaxy and Automation Hub please refer to the
<a href="https://docs.ansible.com/ansible/latest/galaxy/user_guide.html#galaxy-user-guide">Galaxy User Guide</a>.</p>
<h3>Using a requirements file</h3>
<p>For this example I am going to use the requirements.yml method where I
can install all the collections from a single list. If you are familiar
with the use of <em>requirements.yml</em>  file with roles, the file is very
similar for collections. This is best understood through an example:</p>
<div class="code"><pre class="code literal-block"><span class="l l-Scalar l-Scalar-Plain">» cat collections/requirements.yml</span>
<span class="l l-Scalar l-Scalar-Plain">collections</span><span class="p p-Indicator">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">junipernetworks.junos</span>
<span class="w">    </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://galaxy.ansible.com</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">f5networks.f5_modules</span>
<span class="w">    </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://cloud.redhat.com/api/automation-hub/</span>
</pre></div>

<p>Here, we defined 2 collections that are needed for our test playbook.
The Juniper Networks <em>junos</em> collection is being downloaded from Ansible
Galaxy whereas the F5 Networks <em>f5_modules collection</em> is being
downloaded from Automation Hub.</p>
<h3>Installing the collections</h3>
<p>The collections can now be installed using the command:</p>
<div class="code"><pre class="code literal-block"><span class="l l-Scalar l-Scalar-Plain">ansible-galaxy collection install -r collections/requirements.yml</span>
</pre></div>

<p>Running this command in verbose mode helps us look at the endpoints
being accessed:</p>
<p><img alt="Ajay Blog seven" src="../images/posts/archive/ajay-blog-seven.png"></p>
<p>To test the availability of modules from these new collections, you can
use the <em>ansible-doc</em> command:</p>
<div class="code"><pre class="code literal-block"><span class="l l-Scalar l-Scalar-Plain">ansible-doc f5networks.f5_modules.bigip_device_info</span>
</pre></div>

<p>Our simple playbook will collect facts from the Juniper and F5 device
(<a href="https://github.com/termlen0/collections_demo/blob/master/play.yaml">https://github.com/termlen0/collections_demo/blob/master/play.yaml</a>).
We can test the playbook by running it from the command line:</p>
<p><img alt="Ajay blog eight" src="../images/posts/archive/ajay-blog-eight.png"></p>
<p>If you don\'t want to dynamically load the latest collection content
every time, comment out or remove the requirements file.  This means you
can control which Ansible Collections are available by manually
installing each collection required for your Ansible Playbook into the
correct virtual environment.  For example to install the F5 Networks
collections you would perform this command:</p>
<div class="code"><pre class="code literal-block"><span class="l l-Scalar l-Scalar-Plain">ansible-galaxy collection install f5networks.f5_modules</span>
</pre></div>

<p>Another way would be to package the required collections in your SCM
(source control management) with your other content.  This means you
would sync collections in your development environment versus the
Ansible Tower device.</p>
<p>In the future we will introduce a more standardized way around packaging
collections and a particular Ansible version and its dependencies.  </p>
<h3>Conclusion</h3>
<p>Ansible Collections introduce a way to modularize and package automation
content effectively. Red Hat Automation Hub hosts certified, secure
collections that are validated and supported by Red Hat. Ansible Galaxy
hosts community contributed collections. Customers can access
collections from both content repositories. I think of collections as a
superchargers to the "batteries included" approach that Ansible takes.
It up-levels the nuances involved in building out automation, allowing
users to plug-n-play the latest and greatest automation content being
built by certified partners and the community.</p>
          </div>
      </article><br><hr>
<br>
</div>
          <ul class="pager postindexpager clearfix">
<li class="previous"><a href="index-6.html" rel="prev">Newer posts</a></li>
            <li class="next"><a href="index-4.html" rel="next">Older posts</a></li>
        </ul>
<!--End of body content-->
</div>
        <div class="content-slim redhat-footer">
      <div class="footer-left">
        <ul class="footer-left-links">
<li>
            <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a>
          </li>
          <li>
            <a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy policy</a>
          </li>
          <li>
            <a href="https://docs.ansible.com/ansible/latest/community/code_of_conduct.html" target="_blank">Code of conduct</a>
          </li>
        </ul>
</div>
      <div class="footer-right">
        <span class="redhat">Powered by</span>
        <span class="redhat-logo">
          <a href="https://www.redhat.com/en/technologies/management/ansible" target="_blank">
            <img src="../assets/images/redhat_reversed.svg" alt="Red Hat logo." width="96" height="28"></a>
        </span>
      </div>
    </div>

</div>

            <script src="../assets/js/jquery.min.js"></script><script src="../assets/js/popper.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
</script><script src="../assets/js/clipboard.min.js" type="text/javascript"></script><script src="../assets/js/clipboard.js" type="text/javascript"></script>
</body>
</html>
